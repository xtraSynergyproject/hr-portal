@using CMS.UI.ViewModel
@using CMS.Common

@{
    ViewData["Title"] = "Candidate Evaluation Scale Review";
    Layout = "/Views/Shared/_PopupLayout.cshtml";
    //Layout = "~/Areas/CMS/Views/Shared/_LayoutCms.cshtml";
}
@model ApplicationViewModel
<style>
    .logo-galfar {
        width: auto;
        height: 100px;
    }

    .foot-logo-galfar {
        width: auto;
        height: 80px;
    }

    .galfar-caption {
        vertical-align: middle;
        text-align: left;
        margin: 20px auto;
    }

    .title-bg {
        background-color: #f0f0f0;
        border-radius: 6px;
        /*padding: 8px;*/
        margin: 6px;
    }

    .white-col {
        background-color: #fff;
    }

    .row-pad {
        padding: 0 12px;
    }

    .rupees {
        border: 1px solid #D7D6D6;
        border-radius: 4px;
        width: 100px;
        padding: 4px;
        margin: 2px;
    }

    .date-sm {
        border: 1px solid #D7D6D6;
        border-radius: 4px;
        width: 40px;
        padding: 4px;
        margin: 2px;
    }

    .rupees-words {
        border: 1px solid #D7D6D6;
        border-radius: 4px;
        width: 50%;
        padding: 4px;
        margin: 2px;
    }

    .input-box {
        border: 1px solid #D7D6D6;
        border-radius: 4px;
        width: 100%;
        padding: 4px;
    }

    .header-box {
        border: 1px solid #bababa;
        padding: 12px;
        border-radius: 6px;
        margin: 10px 0 0 0;
    }

    .content-box {
        border: 1px solid #bababa;
        padding: 12px;
        border-radius: 6px;
        margin: 2px 0 0;
    }

    hr {
        color: #716e6e;
        height: 2px;
    }

    .foot-content {
        font-size: 14px;
        text-align: justify;
        padding: 12px;
    }

    .row-bot-margin {
        margin: 0 0 12px 0;
    }

    .emp-employr {
        width: 100%;
        border: 1px solid #bababa;
    }

    .text-box {
        width: 100%;
        border: 1px solid #bababa;
        border-radius: 6px;
        height: 32px;
    }

    .norm-input {
        /*width: 100%;*/
        width: 90%;
        border: 1px solid #bababa;
        border-radius: 6px;
        height: 32px;
    }

    .remarks {
        width: 100%;
        border: 1px solid #bababa;
        border-radius: 6px;
        height: 60px;
    }

    .radio-input {
        width: 14px;
        height: 14px;
        float: left;
    }

    .radio-text {
        padding: 0 0 0 12px;
    }
    .radio-textdiv {
        margin-top: 0px;
        margin-left: 14px;
    }
    .tab-scroll {
        overflow-x: scroll;
    }

    .txt-attribute {
        font-size: 14px;
    }

    .bot-space {
        margin-bottom: 12px;
    }

    .table td, .table th {
        padding: .75rem;
        vertical-align: top;
        border: 1px solid #ffffff;
    }

    .table-responsive {
        display: block;
        width: 100%;
        overflow: auto;
        box-shadow: 2px 2px 4px #ccc;
        -webkit-overflow-scrolling: touch;
    }

    .table {
        width: 100%;
        margin-bottom: 1rem;
        color: #212529;
        background: #DAEDFF;
    }

    tr:nth-child(even) {
        background-color: #8cc2ec;
    }

    .table-header-row {
        background-color: #2D9FCA;
        color: #ffffff;
    }

    button, input {
    }

    button, input, optgroup, select, textarea {
        font-family: Roboto;
        font-size: 14px;
    }

    label {
        display: inline-block;
        /*margin-bottom: .5rem;*/
        /*width: 100%;*/
        /*margin: 0;*/
        font-size: 14px;
    }

    .cms-managecandeval-footer {
        /*        position: absolute;*/
        left: 0;
        bottom: 0;
        padding: 10px;
        padding-right: 20px;
        width: 100%;
        background-color: #F8F8F8 !important;
        color: white;
        text-align: right;
    }
    .divmargintb {
        margin-top: 10px;
        margin-bottom: 10px;
    }
</style>

<div style="margin-top: 5px;padding-left: 20px;padding-right: 20px;width: 100%;">
    <form asp-controller="CandidateShortlist" asp-action="ManageCandidateEvaluationScaleReview" method="post" class="form-horizontal">
        <div class="text-danger" asp-validation-summary="All"></div>

        <div class="container">
            <div class="row">
                <div class="col content-box">
                    <div class="row" style="margin:5px 30px;">
                        <div class="col">
                            <div class="row divmargintb">
                                <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Name of the Candidate<br></label></div>
                                <div class="col">
                                    <input type="text" class="norm-input" asp-for="FullName" readonly>
                                </div>
                            </div>
                            <div class="row divmargintb">
                                <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Position<br></label></div>
                                <div class="col">
                                    @*<input type="text" class="norm-input">*@
                                    @(Html.Kendo().DropDownListFor(x=>x.JobId)
                                        .DataSource(source =>
                                        {
                                            source.Read(read =>
                                            {
                                                read.Action("GetIdNameList", "Master", new { @type= "Job" });
                                            });
                                        })
                                        //.OptionLabel("Select")
                                        .DataTextField("Name")
                                        .DataValueField("Id")
                                        .Enable(false)
                                        //.Filter(FilterType.Contains)
                                        .HtmlAttributes(new { @class = "norm-input" }))
                                </div>
                            </div>
                            <div class="row divmargintb">
                                <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Division<br></label></div>
                                <div class="col">
                                    @(Html.Kendo().DropDownListFor(x=>x.DivisionId)
                                .DataTextField("Name")
                                .DataValueField("Id")
                                //.Events(e => e.Change("OnPageTypechange"))
                                .DataSource(source =>
                                {
                                    source.Read(read =>
                                    {
                                        read.Action("GetListOfValueList", "ListOfValue", new { @area = "Recruitment", @type = "LOV_DIVISION" });
                                    });
                                })
                                //.Value()
                                .HtmlAttributes(new { @class= "norm-input" })
                    )
                                    @*<input type="text" class="norm-input">*@
                                </div>
                            </div>
                            <div class="row divmargintb">
                                <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Grade<br></label></div>
                                <div class="col">
                                    @(Html.Kendo().DropDownListFor(x => x.OfferGrade)
                            .DataTextField("Name")
                            .DataValueField("Id")
                            .Filter(FilterType.Contains)
                            .DataSource(source =>
                                {
                                source.Read(read =>
                                {
                                    read.Action("GetGradeIdNameList", "RecruitmentDashboard");
                                });
                            })
                        .OptionLabel(ApplicationConstant.PlaceHolder_SelectOption)
                        // .Value(Model.Status.ToString())
                        //  .HtmlAttributes(new { @class="form-control", style = "width:30%" })
                        )
                                    @*<input type="text" class="norm-input">*@
                                </div>
                            </div>
                            <div class="row divmargintb">
                                <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12"></div>
                            </div>
                            <div class="row" id="divEvalTable" style="display:none;">
                                <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                    <div class="table-responsive tab-scroll">
                                        <table class="table">
                                            <thead>
                                                <tr class="table-header-row">
                                                    <th class="text-center">Attribute</th>
                                                    <th class="text-center" colspan="6">Evaluation Scale</th>
                                                    <th>Marks</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (true)
                                                {
                                                    @if (Model.EvaluationData != null)
                                                    {
                                                        @for (int i = 0; i < Model.EvaluationData.Count; i++)
                                                        {
                                                            <tr>
                                                                <td class="txt-attribute">@Model.EvaluationData[i].EvaluationName<br></td>
                                                                <td colspan="2">
                                                                    <div class="row">
                                                                        <div class="col">
                                                                            <div class="radio-input">
                                                                                @(Html.Kendo().RadioButtonFor(e=>e.EvaluationData[i].IsEvaluationScale1).Checked(Model.EvaluationData[i].IsEvaluationScale1).Enable(true).HtmlAttributes(new { @name = "rdo"+ i }).Label(""))
                                                                            </div>
                                                                            <div class="radio-textdiv"><label class="radio-text">@Model.EvaluationData[i].EvaluationScale1</label></div>
                                                                        </div>
                                                                    </div><br>
                                                                </td>
                                                                <td colspan="2">
                                                                    <div class="row">
                                                                        <div class="col">
                                                                            <div class="radio-input">
                                                                                @(Html.Kendo().RadioButtonFor(e => e.EvaluationData[i].IsEvaluationScale2).Checked(Model.EvaluationData[i].IsEvaluationScale2).Enable(true).HtmlAttributes(new { @name = "rdo"+ i }).Label(""))
                                                                            </div>
                                                                            <div class="radio-textdiv"><label class="radio-text">@Model.EvaluationData[i].EvaluationScale2</label></div>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                                <td colspan="2">
                                                                    <div class="row">
                                                                        <div class="col">
                                                                            <div class="radio-input">
                                                                                @(Html.Kendo().RadioButtonFor(e => e.EvaluationData[i].IsEvaluationScale3).Checked(Model.EvaluationData[i].IsEvaluationScale3).Enable(true).HtmlAttributes(new { @name = "rdo"+ i }).Label(""))
                                                                            </div>
                                                                            <div class="radio-textdiv"><label class="radio-text">@Model.EvaluationData[i].EvaluationScale3</label></div>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                                <td><span id="Marks_@i" style="display:contents;">@Model.EvaluationData[i].Marks</span>/20</td>
                                                            </tr>
                                                        }
                                                    }
                                                }
                                                else
                                                {
                                                    @for (int i = 0; i < Model.EvaluationData.Count; i++)
                                                    {
                                                        <tr>
                                                            <td class="txt-attribute">@Model.EvaluationData[i].EvaluationName<br></td>
                                                            <td colspan="2">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <div class="radio-input">
                                                                            @*<input type="radio" onclick="onSelect(i);" name="rdo"@i>*@
                                                                            @(Html.Kendo().RadioButtonFor(e=>e.EvaluationData[i].IsEvaluationScale1).HtmlAttributes(new { @name = "rdo"+ i }).Label(""))
                                                                        </div>
                                                                        <div class="radio-textdiv"><label class="radio-text">@Model.EvaluationData[i].EvaluationScale1</label></div>
                                                                    </div>
                                                                </div><br>
                                                            </td>
                                                            <td colspan="2">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <div class="radio-input">
                                                                            @*<input type="radio">*@
                                                                            @(Html.Kendo().RadioButtonFor(e => e.EvaluationData[i].IsEvaluationScale2).HtmlAttributes(new { @name = "rdo"+ i }).Label(""))
                                                                        </div>
                                                                        <div class="radio-textdiv"><label class="radio-text">@Model.EvaluationData[i].EvaluationScale2</label></div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td colspan="2">
                                                                <div class="row">
                                                                    <div class="col">
                                                                        <div class="radio-input">
                                                                            @*<input type="radio">*@
                                                                            @(Html.Kendo().RadioButtonFor(e => e.EvaluationData[i].IsEvaluationScale3).HtmlAttributes(new { @name = "rdo"+ i }).Label(""))
                                                                        </div>
                                                                        <div class="radio-textdiv"><label class="radio-text">@Model.EvaluationData[i].EvaluationScale3</label></div>
                                                                    </div>
                                                                </div>
                                                            </td>
                                                            <td><span id="Marks_@i" style="display:contents;">0</span>/20</td>
                                                        </tr>
                                                    }
                                                }


                                                <tr>
                                                    <td class="txt-attribute" colspan="7"><br></td>
                                                    <td><strong><span id="TotalMarks" style="display:contents;">0</span>/140</strong></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12"></div>
                                <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                    <div class="table-responsive bot-space">
                                        <table class="table">
                                            <thead>
                                                <tr class="table-header-row">
                                                    <th colspan="6">Selection Decision</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td colspan="2"></td>
                                                    <td>
                                                        <div class="col">
                                                            <div class="radio-input">
                                                                @*<input type="radio">*@
                                                                @*@(Html.Kendo().RadioButton().Name("Selected").HtmlAttributes(new { @name = "feedback" }).Label(""))*@
                                                                @(Html.Kendo().RadioButton().Name("Selected").Checked(Model.InterviewSelectionFeedback==InterviewFeedbackEnum.Selected).HtmlAttributes(new { @name = "feedback" }).Label(""))
                                                            </div>
                                                            <div><label class="radio-text">SELECTED, Best suited for the job<br></label></div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="col">
                                                            <div class="radio-input">
                                                                @*<input type="radio">*@
                                                                @*@(Html.Kendo().RadioButton().Name("CanBeSelected").HtmlAttributes(new { @name = "feedback" }).Label(""))*@
                                                                @(Html.Kendo().RadioButton().Name("CanBeSelected").Checked(Model.InterviewSelectionFeedback == InterviewFeedbackEnum.CanBeSelected).HtmlAttributes(new { @name = "feedback" }).Label(""))
                                                            </div>
                                                            <div><label class="radio-text">Can be selected, will do the job<br></label></div>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="col">
                                                            <div class="radio-input">
                                                                @*<input type="radio">*@
                                                                @*@(Html.Kendo().RadioButton().Name("Rejected").HtmlAttributes(new { @name = "feedback" }).Label(""))*@
                                                                @(Html.Kendo().RadioButton().Name("Rejected").Checked(Model.InterviewSelectionFeedback == InterviewFeedbackEnum.Rejected).HtmlAttributes(new { @name = "feedback" }).Label(""))
                                                            </div>
                                                            <div><label class="radio-text">REJECTED<br></label></div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="row divmargintb">
                                <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Salary on Appointment<br></label></div>
                                <div class="col" style="text-align:right;"><span style="display:contents"> QAR</span><input asp-for="SalaryOnAppointment" type="text" class="norm-input" min="0" pattern="^[0-9]*([\.][0-9]{0,2})?$" onkeydown="return (!((event.keyCode>=65 && event.keyCode <= 95) || event.keyCode >= 106 || (event.keyCode >= 48 && event.keyCode <= 57 && isNaN(event.key))) && event.keyCode!=32);" title="Salary On Appointment In Numbers" autocomplete="off"></div>
                            </div>
                            <div class="row divmargintb">
                                <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Accommodation<br></label></div>
                                <div class="col" style="text-align:right;">
                                    @(Html.Kendo().DropDownListFor(x=>x.AccommodationId)
                                .DataTextField("Name")
                                .DataValueField("Id")
                                //.Events(e => e.Change("OnPageTypechange"))
                                .DataSource(source =>
                                {
                                    source.Read(read =>
                                    {
                                        read.Action("GetListOfValueList", "ListOfValue", new { @area = "Recruitment", @type = "LOV_ACCOMMODATION" });
                                    });
                                })
                                //.Value()
                                .HtmlAttributes(new { @class= "norm-input" })
                    )
                                    @*<input type="text" class="norm-input">*@
                                </div>
                            </div>
                            <div class="row divmargintb">
                                <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Hiring Manager Remarks<br></label></div>
                                <div class="col" style="text-align:right;">
                                    <span style="display:contents"> </span>
                                    @*<input asp-for="HiringManagerRemarks" type="text" class="norm-input">*@
                                    <textarea asp-for="HiringManagerRemarks" class="norm-input" style="height:60px;"></textarea>
                                </div>
                            </div>
                            <div class="row divmargintb">
                                <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Upload Attachment<br></label></div>

                                <div class="col" style="text-align:right;padding-left:60px;">

                                    @(Html.Kendo().Upload().Multiple(false)
                                .Name("AttachmentValue1")
                                .Async(a => a
                                .Save("Save1", "Document", new { @area = "cms" })
                                .AutoUpload(true)
                                )
                                .Events(e => e.Success("onFileUploadSuccess1")
                                )
                                    .Validation(validation => validation.MaxFileSize(52428800))
                                    .HtmlAttributes(new { @class = "norm-input" })
                            )
                                    @if (Model.EvaluationAttachmentId != null)
                                    {
                                        <a href="/cms/Document/GetFileMongo?fileId=@Model.EvaluationAttachmentId" target="_blank"><i class="fas fa-download" title="Download"></i></a>

                                        @*<i class="fas fa-eye view_attach" title="Preview" onclick="ViewAttachment('@Model.EvaluationAttachmentId');" style="margin-left: 10px;color:#64aae1;cursor:pointer"></i>*@
                                    }
                                </div>
                            </div>
                            @*<div class="row">
                                <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Accomodation<br></label></div>
                                <div class="col"><label class="col-form-label">Bachelor</label></div>
                            </div>
                            <div class="row">
                                <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4">
                                    <div class="row">
                                        <div class="col-sm-5 col-md-4 col-lg-3 col-xl-5"><label class="col-form-label">Approved<br></label></div>
                                        <div class="col">
                                            <div class="row">
                                                <div class="col-md-4 col-lg-3 col-xl-6">
                                                    <div class="form-check"><input class="form-check-input" type="radio" id="formCheck-3"><label class="form-check-label" for="formCheck-1">Yes</label></div>
                                                </div>
                                                <div class="col-md-4 col-lg-3 col-xl-6">
                                                    <div class="form-check"><input class="form-check-input" type="radio" id="formCheck-4"><label class="form-check-label" for="formCheck-2">No</label></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-auto col-md-7 col-xl-5"><label class="col-form-label">Interviewer's Signature</label></div>
                                <div class="col-sm-5 col-md-5 col-lg-auto col-xl-auto"><label class="col-form-label text-right">Date</label></div>
                                <div class="col-sm-auto col-md-7 col-lg-auto"><input type="text" class="norm-input"></div>
                            </div>*@
                            <div id="divAppointment" style="display:none;">
                                <div class="row">
                                    <div class="col">
                                        &nbsp;
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <span style="display:contents;font-weight: bold;"> APPOINTMENT FORM FOR NEW EMPLOYEE </span>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        &nbsp;
                                    </div>
                                </div>
                                <div class="row divmargintb">
                                    <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Selected through<br></label></div>
                                    <div class="col" style="text-align:right;">
                                        @(Html.Kendo().DropDownListFor(x=>x.SelectedThroughId)
                                        .DataSource(source =>
                                        {
                                            source.Read(read =>
                                            {
                                                read.Action("GetListOfValueList", "ListOfValue", new { @area = "Recruitment", @type = "LOV_SelectedThrough" });
                                            });
                                        })
                                        //.OptionLabel("--Select--")
                                        .DataTextField("Name")
                                        .DataValueField("Id")
                                        //.Filter(FilterType.Contains)
                                        .HtmlAttributes(new { @class = "norm-input" }))
                                    </div>
                                </div>
                                <div class="row divmargintb">
                                    <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Interview conducted by<br></label></div>
                                    <div class="col" style="text-align:right;">

                                        @(Html.Kendo().DropDownListFor(x=>x.InterviewByUserId)
                                        .DataSource(source =>
                                        {
                                            source.Read(read =>
                                            {
                                                read.Action("GetHiringManagerList", "HiringManager", new { @area = "Recruitment" });
                                            });
                                        })
                                        //.OptionLabel("--Select--")
                                        .DataTextField("Name")
                                        .DataValueField("UserId")
                                        .Filter(FilterType.Contains)
                                        .HtmlAttributes(new { @class = "norm-input" }))
                                    </div>
                                </div>
                                <div class="row divmargintb">
                                    <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Interview venue<br></label></div>
                                    <div class="col" style="text-align:right;">
                                        <span style="display:contents"> </span>
                                        <input asp-for="InterviewVenue" type="text" class="norm-input">
                                    </div>
                                </div>
                                <div class="row divmargintb">
                                    <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">If a new post created, justification<br></label></div>
                                    <div class="col" style="text-align:right;">
                                        <span style="display:contents"> </span>
                                        <textarea asp-for="NewPostJustification" class="norm-input" style="height:60px;"></textarea>
                                    </div>
                                </div>
                                <div class="row divmargintb">
                                    <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Briefly describe how he suits to the post based on the job description</label></div>
                                    <div class="col" style="text-align:right;">
                                        <span style="display:contents"> </span>
                                        <textarea asp-for="DescribeHowHeSuits" class="norm-input" style="height:60px;"></textarea>
                                    </div>
                                </div>
                                <div class="row divmargintb">
                                    <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Leave Cycle<br></label></div>
                                    <div class="col" style="text-align:right;">
                                        <span style="display:contents"> </span>
                                        <input asp-for="LeaveCycle" type="text" class="norm-input">
                                    </div>
                                </div>
                                <div class="row divmargintb">
                                    <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Other benefit, If any<br></label></div>
                                    <div class="col" style="text-align:right;">
                                        <span style="display:contents"> </span>
                                        <textarea asp-for="OtherBenefits" class="norm-input" style="height:60px;"></textarea>
                                    </div>
                                </div>
                                <div class="row divmargintb">
                                    <div class="col-sm-5 col-md-5 col-lg-5 col-xl-4"><label class="col-form-label">Appointment Remarks<br></label></div>
                                    <div class="col" style="text-align:right;">
                                        <span style="display:contents"> </span>
                                        <textarea asp-for="AppointmentRemarks" class="norm-input" style="height:60px;"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 pad-15">
            &nbsp;
        </div>
        <div class="cms-managecandeval-footer">

            @*<input type="button" class="btn btn-light" value="Close" onclick="closeNav()" />*@
            <input type="submit" class="btn btn-primary" value="Save" onclick="SaveEvaluation(event)" />
        </div>

        @Html.HiddenFor(x => x.Id)
        @Html.HiddenFor(x => x.MarksSelections)
        @Html.HiddenFor(x => x.EvaluationDataString)
        @Html.HiddenFor(x => x.InterviewSelectionFeedback)
        @Html.HiddenFor(x => x.DataAction)
        @Html.HiddenFor(x => x.Score)
        @Html.HiddenFor(x => x.EvaluationData)
        @Html.HiddenFor(x => x.InterviewByUserId)
        @Html.HiddenFor(x => x.JobId)
        @Html.HiddenFor(x => x.ManpowerTypeCode)
        @Html.HiddenFor(x => x.IsCandidateEvaluation)
        @Html.HiddenFor(x => x.EvaluationAttachmentId)
        @Html.HiddenFor(x => x.Mode)
    </form>
</div>

<script type="text/javascript">
    $(document).ready(function () {

        if ('@Model.ManpowerTypeCode' == "Staff") {
            $("#divEvalTable").show();
        } else {
            $("#divEvalTable").hide();
        }
        if ('@ViewBag.Success' == "True") {
            window.location.href = '@Url.Action("CandidateEvaluationView", "CandidateShortlist", new { @area= "Recruitment" })?applicationId=@Model.Id';
            window.parent.$("#kgrdCandInterview").data("kendoGrid").dataSource.read();
            window.parent.$("#kgrdCandJobOffer").data("kendoGrid").dataSource.read();

            //alert("Candidate is Moved to Next Stage");
        }
        var rrdo = $("input[type=radio]");
        var mark = "";
        for (var i = 0; i <@Model.EvaluationData.Count; i++) {

                        var rGrpEval = $("input[name=rdo" + i + "]");
                        var checkedRadio = rGrpEval.filter(":checked");
                        if (checkedRadio.prevObject[0].checked) {
                            $('#Marks_' + i).html(20);
                            mark = mark + "," + i + "=" + 0;
                        }
                        if (checkedRadio.prevObject[1].checked) {
                            $('#Marks_' + i).html(10);
                            mark = mark + "," + i + "=" + 1;
                        }
                        if (checkedRadio.prevObject[2].checked) {
                            $('#Marks_' + i).html(0);
                            mark = mark + "," + i + "=" + 2;
                        }
                        CalEvalMarks();
        }
        $("#MarksSelections").val(mark);
        onFeedback();
        rrdo.click(function () {
            // Do something interesting here
            //alert("Radio");
            mark = "";
            for (var i = 0; i <@Model.EvaluationData.Count; i++) {
                        var rGrpEval = $("input[name=rdo" + i + "]");

                rGrpEval.click(function () {

                });

                        var checkedRadio = rGrpEval.filter(":checked");
                        if (checkedRadio.prevObject[0].checked) {
                            $('#Marks_' + i).html(20);
                            mark = mark + "," + i + "=" + 0;
                        }
                        if (checkedRadio.prevObject[1].checked) {
                            $('#Marks_' + i).html(10);
                            mark = mark + "," + i + "=" + 1;
                        }
                        if (checkedRadio.prevObject[2].checked) {
                            $('#Marks_' + i).html(0);
                            mark = mark + "," + i + "=" + 2;
                        }
                        CalEvalMarks();
            }
            $("#MarksSelections").val(mark);
            onFeedback();
        });

    });
    function onFileUploadSuccess1(e) {
        //alert(e.response.fileId);
        //
        if (e.response.success) {
            $("#EvaluationAttachmentId").val(e.response.fileId);
        }
        else {
            //var msg = ExtractError(e.response.errors, true);
            //alert(msg);
        }
        return true;
    }
    function onFeedback() {
        var rGrpEval = $("input[name=feedback]");
        var checkedRadio = rGrpEval.filter(":checked");
        if (checkedRadio.prevObject[0].checked) {
            $('#InterviewSelectionFeedback').val('@InterviewFeedbackEnum.Selected');
            if ('@Model.ManpowerTypeCode' == "Staff") {
                $('#divAppointment').show();
                
            } else {
                $('#divAppointment').hide();
            }

        }
        if (checkedRadio.prevObject[1].checked) {
            $('#InterviewSelectionFeedback').val('@InterviewFeedbackEnum.CanBeSelected');
            //$('#divAppointment').hide();
                        if ('@Model.ManpowerTypeCode' == "Staff") {
                            $('#divAppointment').show();
                            
            } else {
                $('#divAppointment').hide();
            }
        }
        if (checkedRadio.prevObject[2].checked) {
            $('#InterviewSelectionFeedback').val('@InterviewFeedbackEnum.Rejected');
            $('#divAppointment').hide();
        }

    }
    function onSelect(i) {
        alert(i);
    }
    function CalMarks() {
        var total = 0;
        var acad = parseInt(document.getElementById("AcademicQualificationMarks").innerHTML);
        var rel = parseInt(document.getElementById("RelevantJobMarks").innerHTML);
        var know = parseInt(document.getElementById("KnowledgeMarks").innerHTML);
        var comm = parseInt(document.getElementById("CommunicationMarks").innerHTML);
        var safe = parseInt(document.getElementById("SafetyMarks").innerHTML);
        var pres = parseInt(document.getElementById("PresentabilityMarks").innerHTML);
        var logi = parseInt(document.getElementById("LogicalMarks").innerHTML);
        total = acad + rel + know + comm + safe + pres + logi;
        $('#TotalMarks').html(total);
    }

    function CalEvalMarks() {
        var total = 0;
        for (var i = 0; i <@Model.EvaluationData.Count; i++) {
            //$('#Marks_' + i).html(0);
            var mark = parseInt(document.getElementById("Marks_" + i).innerHTML);
            total = total + mark;
        }
        $('#TotalMarks').html(total);
        $('#Score').val(total);
    }

    function closeNav() {
        //window.parent.CloseIframePopup();
    }
    function SaveEvaluation(e) {

        var msg = "";
        var msgcount = 0;
        var appId = '@Model.Id';
        var isSelect = $('#InterviewSelectionFeedback').val();
        if (isSelect == '') {
            //alert("Select any decision.");
            msg = msg + " Select any decision.\n ";
            msgcount = msgcount + 1;
            //e.preventDefault();
        }
        if (isSelect == '@InterviewFeedbackEnum.Rejected') {
            $('#SalaryOnAppointment').val(0);
        } else {
            var salary = $('#SalaryOnAppointment').val();
            if (salary == '') {
                msg = msg + " Please fill salary on appointment.\n ";
                msgcount = msgcount + 1;
                //e.preventDefault();
            }        
        }

        if (msgcount > 0) {
            alert(msg);
            //$("#validation-summary").html(msg);
            //$("#validation-summary").css("display", "block");
            e.preventDefault();
            return false;
        }
        @*if ('@Model.ManpowerTypeCode' == "Staff") {
            if ((isSelect == '@InterviewFeedbackEnum.Selected' || isSelect == '@InterviewFeedbackEnum.CanBeSelected') && appId != ''){
                $.ajax({
                    type: "GET",
                    url: "/Cms/Task/ServiceEmployeeAppointment",
                    data: { 'applicationId': appId},
                    success: function (data) {
                        if (data.success) {
                            //alert("ajax")
                            //ShowNotification("Candidate is Moved to Next Stage", "success");
                            } else {

                        }
                    },
                    dataType: "json",
                });
            }
        }
        else {
            if ((isSelect == '@InterviewFeedbackEnum.Selected' || isSelect == '@InterviewFeedbackEnum.CanBeSelected') && appId != ''){
                $.ajax({
                    type: "GET",
                    url: "/Cms/Task/WorkerAppointment",
                    data: { 'applicationId': appId},
                    success: function (data) {
                        if (data.success) {
                            //alert("ajax")
                            //ShowNotification("Candidate is Moved to Next Stage", "success");
                            } else {

                        }
                    },
                    dataType: "json",
                });
            }
        }*@
    }
</script>