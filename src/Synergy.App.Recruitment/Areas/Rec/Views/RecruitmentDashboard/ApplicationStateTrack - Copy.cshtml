@using CMS.UI.ViewModel;
@using CMS.Common;
@using Kendo.Mvc.UI;
@using Kendo.Mvc.Extensions;
@model ApplicationStateTrackViewModel

@{
    ViewData["Title"] = "Application Status Track";
    //Layout = "~/Areas/CMS/Views/Shared/_LayoutCms.cshtml";
    //Layout = null;
    Layout = "/Views/Shared/_PopupLayout.cshtml";
}
<script>

   function onViewComment(appId, appStateId)
   {
       @*iframeOpenUrl = '@Url.Action("AddComment", "CandidateShortlist", new { @area="Recruitment"})?appId=' + appId + "&appStateId=" + appStateId + "&type=" + "view";
       OpenIframePopup1(1000, 1200, 'Comments');*@
         var win = GetMainWindow();
       win.iframeOpenUrl = '@Url.Action("AddComment", "CandidateShortlist", new { @area = "Recruitment" })?appId=' + appId + "&appStateId=" + appStateId + "&type=" + "view";
       win.OpenWindow({ Title: 'Comments', Width: 1000, Height: 1000 });
        return false;
    }

</script>



<div class="div_header" style="margin: 50px;color: #ffffff;">
    <header class="justify-content-center" style="padding: 6px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" class="bi bi-person justify-content-end align-items-start" style="font-size: 40px;margin-bottom: 19px;">
            <path fill-rule="evenodd" d="M10 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6 5c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"></path>
        </svg><label style="font-size: 40px;margin-left: 8px;">@Html.DisplayFor(x => x.FullName)</label>
        <h2 style="margin-left: 50px; margin-bottom:34px"></h2><i class="fa fa-calendar" style="font-size: 30px; padding-left:6px"></i><label style="font-size: 30px;margin-left: 14px;">Job Application Date :&nbsp;</label><label style="font-size: 30px; margin-left:10px">@Html.DisplayFor(x => x.AppliedDate)</label>
    </header>
</div>
<div class="div_body">
    <div class="table-responsive tab-scroll">
        <table class="table">
            <thead>
                <tr class="table-header-row">
                    <th class="text-center"></th>
                    @*<th class="text-center">Un Reviewed</th>*@
                    <th class="text-center">Shortlist by HR</th>
                    <th class="text-center">Shortlist by HM</th>
                    <th class="text-center">Interview completed</th>
                    <th class="text-center">Intent to Offer Sent</th>
                    <th class="text-center">Final Offer Sent</th>
                    <th class="text-center">Final Offer Accepted</th>
                    <th class="text-center">Medical Completed</th>
                    <th class="text-center">Visa Appointment Taken</th>
                    <th class="text-center">Biometric Completed</th>
                    <th class="text-center">Visa Approved</th>
                    <th class="text-center">Visa Sent To Candidate</th>
                    <th class="text-center">Flight Tickets Booked</th>
                    <th class="text-center">Candidate Arrived</th>
                    <th class="text-center">Candidate Joined</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="txt-attribute">Date<br></td>
                    @*<td>@Html.DisplayFor(x => x.UnReviewedDate)</td>*@
                    <td>@Html.DisplayFor(x => x.ShortListByHrDate)</td>
                    <td>@Html.DisplayFor(x => x.ShortListByHmDate)</td>
                    <td>@Html.DisplayFor(x => x.InterviewCompletedDate)</td>
                    <td>@Html.DisplayFor(x => x.IntentToOfferSentDate)</td>
                    <td>@Html.DisplayFor(x => x.FinalOfferSentDate)</td>
                    <td>@Html.DisplayFor(x => x.FinalOfferAcceptedDate)</td>
                    <td>@Html.DisplayFor(x => x.MedicalCompletedDate)</td>
                    <td>@Html.DisplayFor(x => x.VisaAppointmentTakenDate)</td>
                    <td>@Html.DisplayFor(x => x.BiometricCompletedDate)</td>
                    <td>@Html.DisplayFor(x => x.VisaApprovedDate)</td>
                    <td>@Html.DisplayFor(x => x.VisaSentToCandidateDate)</td>
                    <td>@Html.DisplayFor(x => x.FlightTicketsBookedDate)</td>
                    <td>@Html.DisplayFor(x => x.CandidateArrivedDate)</td>
                    <td>@Html.DisplayFor(x => x.JoinedDate)</td>
                </tr>
                <tr>
                    <td class="txt-attribute">Number of Days</td>

                    @*<td>
                        @if (Model.UnReviewedDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.UnReviewedDate)).TotalDays))).ToString()))
                        }
                    </td>*@
                    <td>
                        @if (Model.ShortListByHrDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.ShortListByHrDate)).TotalDays))).ToString()))
                        }
                    </td>
                    
                    <td>
                        @if (Model.ShortListByHmDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.ShortListByHmDate)).TotalDays))).ToString()))
                        }    
                    </td>
                    

                    <td>
                        @if (Model.InterviewCompletedDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.InterviewCompletedDate)).TotalDays))).ToString()))
                        }
                    </td>

                    <td>
                        @if (Model.IntentToOfferSentDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.IntentToOfferSentDate)).TotalDays))).ToString()))
                        }
                    </td>
                    <td>
                        @if (Model.FinalOfferSentDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.FinalOfferSentDate)).TotalDays))).ToString()))
                        }
                    </td>

                    <td>
                        @if (Model.FinalOfferAcceptedDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.FinalOfferAcceptedDate)).TotalDays))).ToString()))
                        }
                    </td>

                    <td>
                        @if (Model.MedicalCompletedDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.MedicalCompletedDate)).TotalDays))).ToString()))
                        }
                    </td>


                    <td>
                        @if (Model.VisaAppointmentTakenDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.VisaAppointmentTakenDate)).TotalDays))).ToString()))
                        }
                    </td>


                    <td>
                        @if (Model.BiometricCompletedDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.BiometricCompletedDate)).TotalDays))).ToString()))
                        }
                    </td>


                    <td>
                        @if (Model.VisaApprovedDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.VisaApprovedDate)).TotalDays))).ToString()))
                        }
                    </td>

                    <td>
                        @if (Model.VisaSentToCandidateDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.VisaSentToCandidateDate)).TotalDays))).ToString()))
                        }
                    </td>


                    <td>
                        @if (Model.FlightTicketsBookedDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.FlightTicketsBookedDate)).TotalDays))).ToString()))
                        }
                    </td>


                    <td>
                        @if (Model.CandidateArrivedDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.CandidateArrivedDate)).TotalDays))).ToString()))
                        }
                    </td>


                    <td>
                        @if (Model.JoinedDate != null && Model.AppliedDate != null)
                        {@(string.Format("{0}", Math.Round(Math.Abs(((Convert.ToDateTime(Model.AppliedDate) - Convert.ToDateTime(Model.JoinedDate)).TotalDays))).ToString()))
                        }
                    </td>
                </tr>
                <tr>
                    <td class="txt-attribute">Updated by</td>
                    @*<td>@Html.DisplayFor(x => x.UnReviewedUpdatedBy)</td>*@
                    <td>@Html.DisplayFor(x => x.ShortListByHrUpdatedBy)</td>
                    <td>@Html.DisplayFor(x => x.ShortListByHmUpdatedBy)</td>
                    <td>@Html.DisplayFor(x => x.InterviewCompletedUpdatedBy)</td>
                    <td>@Html.DisplayFor(x => x.IntentToOfferSentUpdatedBy)</td>
                    <td>@Html.DisplayFor(x => x.FinalOfferSentUpdatedBy)</td>
                    <td>@Html.DisplayFor(x => x.FinalOfferAcceptedUpdatedBy)</td>
                    <td>@Html.DisplayFor(x => x.MedicalCompletedUpdatedBy)</td>
                    <td>@Html.DisplayFor(x => x.VisaAppointmentTakenUpdatedBy)</td>
                    <td>@Html.DisplayFor(x => x.BiometricCompletedUpdatedBy)</td>
                    <td>@Html.DisplayFor(x => x.VisaApprovedUpdatedBy)</td>
                    <td>@Html.DisplayFor(x => x.VisaSentToCandidateUpdatedBy)</td>

                    <td>@Html.DisplayFor(x => x.FlightTicketsBookedUpdatedBy)</td>
                    <td>@Html.DisplayFor(x => x.CandidateArrivedUpdatedBy)</td>
                    <td>@Html.DisplayFor(x => x.JoinedUpdatedBy)</td>
                </tr>
                <tr>
                    <td class="txt-attribute">Comments<br></td>
                    @*<td>
                        @if (Model.UnReviewedStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.UnReviewedStateId')">View</button>}
                    </td>*@
                    <td>
                        @if (Model.ShortListByHrStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.ShortListByHrStateId')">View</button>}
                    </td>
                    <td>
                        @if (Model.ShortListByHmStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.ShortListByHmStateId')">View</button>}
                    </td>
                    <td>
                        @if (Model.InterviewCompletedStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.InterviewCompletedStateId')">View</button>}
                    </td>
                    <td>
                        @if (Model.IntentToOfferSentStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.IntentToOfferSentStateId')">View</button>}
                    </td>
                    <td>
                        @if (Model.FinalOfferSentStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.FinalOfferSentStateId')">View</button>}
                    </td>
                    <td>
                        @if (Model.FinalOfferAcceptedStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.FinalOfferAcceptedStateId')">View</button>}
                    </td>
                    <td>
                        @if (Model.MedicalCompletedStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.MedicalCompletedStateId')">View</button>}
                    </td>
                    <td>
                        @if (Model.VisaAppointmentTakenStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.VisaAppointmentTakenStateId')">View</button>}
                    </td>
                    <td>
                        @if (Model.BiometricCompletedStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.BiometricCompletedStateId')">View</button>}
                    </td>
                    <td>
                        @if (Model.VisaApprovedStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.VisaApprovedStateId')">View</button>}
                    </td>
                    <td>
                        @if (Model.VisaSentToCandidateStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.VisaSentToCandidateStateId')">View</button>}
                    </td>


                    <td>
                        @if (Model.FlightTicketsBookedStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.FlightTicketsBookedStateId')">View</button>}
                    </td>
                    <td>
                        @if (Model.CandidateArrivedStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.CandidateArrivedStateId')">View</button>}
                    </td>
                    <td>
                        @if (Model.JoinedStateId != null)
                        {<button class="btn btn-info" onclick="onViewComment('@Model.ApplicationId', '@Model.JoinedStateId')">View</button>}
                    </td>

                </tr>
                <tr></tr>
                <tr></tr>
                <tr></tr>
                <tr></tr>
            </tbody>
        </table>
    </div>
    @*<div class="table-responsive tab-scroll" style="margin-top: 40px;width: 230px;">
            <table class="table">
                <thead>
                    <tr class="table-header-row">
                        <th class="text-center">Number of Days</th>
                        <th class="text-center">Candidate Vs Average</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="txt-attribute">5<br></td>
                        <td>Shortlisted by HR</td>
                    </tr>
                    <tr>
                        <td class="txt-attribute">5</td>
                        <td>Shortlisted by HM</td>
                    </tr>
                    <tr>
                        <td class="txt-attribute">1</td>
                        <td>Interview Completed</td>
                    </tr>
                    <tr>
                        <td class="txt-attribute">2<br></td>
                        <td>Intent to Offer Approved</td>
                    </tr>
                    <tr></tr>
                    <tr></tr>
                    <tr></tr>
                    <tr></tr>
                </tbody>
            </table>
        </div>*@
</div>
@*<script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>*@


