@inject IStringLocalizer<CMS.UI.Web.Areas.Pay.Controllers.SalaryInfoController> Resource
@using CMS.Data.Model
@using CMS.UI.ViewModel
@using Kendo.Mvc.UI
@using CMS.Common


@{
    ViewBag.Title = "Work Structure";
    Layout = null;
}

<script type="text/javascript" src="~/lib/joint.js/lodash.js"></script>
<script type="text/javascript" src="~/lib/joint.js/backbone.js"></script>
<script type="text/javascript" src="~/lib/joint.js/joint.js"></script>
<script type="text/javascript" src="~/lib/joint.js/config/selection.js"></script>
<script type="text/javascript" src="~/lib/joint.js/dagre.js"></script>
<script type="text/javascript" src="~/lib/joint.js/graphlib.core.js"></script>
<script type="text/javascript" src="~/lib/joint.js/config/halo.js"></script>

<script src="~/js/CMS/workStructure.js"></script>

<script>

    $(document).ready(function () {
        $("#Person").kendoDropDownList({
            dataTextField: "Name",
            dataValueField: "Id",
            filter: "contains",
            optionLabel: "Select Person",
            change: OnPersonSelection,
            dataSource: {                
                transport: {
                    read: {
                        url: "/CHR/HRDirect/GetPersonList",
                    }
                }
            }
        });
    });
</script>

<span id="loggedInPersonId" style="display:none" value="@ViewBag.LoggedInPersonId"></span>
<div class="" id="dcontent" style="margin-left: 2%;">
    <div class="row">

        <div class="col">
            <div class="row" style="margin:5px;">

                @*<div class="column" style="margin-left:5px;">
                    @(Html.Kendo().DropDownList().Name("Person")
                        .AutoBind(true)
                        .HtmlAttributes(new { @style = "width:100%" })
                        .DataSource(source =>
                        {
                            source.Read(read =>
                            {
                                read.Action("GetPersonList", "HRDirect",new { @area= "CHR" });
                            });
                        })
                        .Events(x => x.Change("OnPersonSelection"))
                        .OptionLabel("Select Person")
                        .DataTextField("Name")
                        .DataValueField("Id")
                        .Filter(FilterType.Contains)
                )*@

                    <input id="Person" style="width:100%" />
                </div>

                <div class="column" style="margin-left:5px;">
                    <label for="sx">@Resource["Zoom"]</label>
                    <input id="sx" type="range" value="1.00" step="0.1" min="0.1" max="1.5" autocomplete="off" />
                </div>

                <div class="column" style="margin-left:5px;">
                    <label for="width">@Resource["Width"]</label>
                    <input id="width" type="range" value="3000" step="500" min="3000" max="30000" autocomplete="off" />
                </div>

                <div class="column" style="margin-left:5px;">
                    <label for="height">@Resource["Height"]</label> <input id="height" type="range" value="2000" step="500" min="2000" max="200000" autocomplete="off" />
                </div>

                <div class="column" style="margin-left:5px;margin-top: 5px;">
                    <button title="@Resource["AdjustLayout"]" class="btn btn-primary" onclick="graphLayout()"><span style="font-size:20px" class="fad fa-project-diagram "></span></button>
                </div>
                <div class="column" style="margin-left:5px;margin-top: 5px;">
                    <button title="@Resource["RefreshDiagram"]" class="btn btn-primary" onclick="onRefreshDiagram()"><span style="font-size:20px" class="fad fa-sync "></span></button>
                </div>
                <div class="column" style="margin-left:5px;margin-top: 5px;">
                    <input id="nodeDrp" style="width: 300px;" />
                </div>


                <div class="column" style="margin-left:5px;margin-top: 5px;display:none;">
                    <input id="nodeDrpList" style="width: 300px;" />
                </div>


                <div id="movebtn" class="column" style="margin-left:5px;margin-top: 5px;display:none">
                    <button class="btn btn-primary" onclick="onChangeNodeFocus()"><span class="fas fa-angle-double-right"></span></button>
                </div>

            </div>
            @*<div style="text-align:center"><span id="businessTitleLabel" style="font-size:20px;font-weight:600">Work Structure Diagram</span></div>*@
            <div style=" height: 600px; overflow-x: scroll; overflow-y: scroll;">  <div id="paper" style=" background-color: white;"></div></div>
        </div>

    </div>
</div>


<style>

    .nodeHighlight {
        outline-offset: 15px;
        outline: dashed;
        outline-color: cornflowerblue;
        outline-width: thick;
    }

    .left {
        min-width: 300px;
        max-width: 600px;
    }

    .splitter-container {
        height: 90vh !important;
        width: 100%;
    }

    .menu .menu-options .menu-option {
        padding: 0;
        font-weight: 500;
        z-index: 1;
        font-size: 14px;
        padding: 10px 40px 10px 20px;
        cursor: pointer;
        border-bottom: solid;
        border-color: lightgrey;
    }
    /* body {
            font-family: "Roboto", san-serif;
        }*/

    .center {
        text-align: center;
    }

    .menu {
        width: 120px;
        z-index: 1;
        box-shadow: 0 4px 5px 3px rgba(0, 0, 0, 0.2);
        position: fixed;
        display: none;
        transition: 0.2s display ease-in;
    }

        .menu .menu-options {
            list-style: none;
            padding: 10px 0;
            z-index: 1;
            margin: unset;
        }

            .menu .menu-options .menu-option {
                font-weight: 500;
                z-index: 1;
                font-size: 14px;
                padding: 10px 40px 10px 20px;
                cursor: pointer;
                border-bottom: solid;
                border-color: lightgrey;
            }

                .menu .menu-options .menu-option:hover {
                    background: rgba(0, 0, 0, 0.2);
                }

    button {
        background: grey;
        border: none;
    }

        button .next {
            color: green;
        }

        button[disabled=false]:hover .next {
            color: red;
            animation: move 0.5s;
            animation-iteration-count: 2;
        }

    @@keyframes move {
        from {
            transform: translate(0%);
        }

        50% {
            transform: translate(-40%);
        }

        to {
            transform: transform(0%);
        }
    }

    #paper {
        background: #ffffff;
    }

    #stencil {
        background: #ece2e3;
    }

    hr {
        margin-bottom: 0px;
    }

    input, label {
        display: block;
    }

    .accordion {
        background-color: #17a2b8;
        color: white;
        cursor: pointer;
        padding-left: 25px;
        border: none;
        text-align: left;
        outline: none;
        font-size: 17px;
        transition: 0.4s;
        font-weight: bold;
        width: 100%;
    }

    .accordion2 {
        background-color: #17a2b8;
        color: white;
        cursor: pointer;
        padding-left: 25px;
        border: none;
        text-align: left;
        outline: none;
        font-size: 17px;
        transition: 0.4s;
        font-weight: bold;
        width: 100%;
    }

        .active, .accordion2:hover {
            background-color: #17a2b8;
        }

    .panel {
        padding: 0 18px;
        background-color: white;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.2s ease-out;
    }

    .diagram-tree-menu {
        padding: 4px;
        border-radius: 50%;
        width: 28px;
        height: 28px;
        line-height: 19px;
        margin-left: 10px;
        font-size: medium;
        padding-left: 5px;
        visibility: hidden;
        cursor: pointer;
    }


        .diagram-tree-menu:hover {
            background-color: silver;
        }

    .treeview .k-state-hover:hover .diagram-tree-menu {
        visibility: visible;
    }

    .k-in {
        width: 100%
    }

    .banner-container {
        position: relative;
        color: white;
    }

    .banner-text {
        position: absolute;
        top: 14px;
        left: 60px;
        font-size: 35px;
    }
</style>

