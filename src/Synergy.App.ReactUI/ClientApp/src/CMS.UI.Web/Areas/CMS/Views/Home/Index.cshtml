@using Synergy.App.ViewModel;
@using Synergy.App.Common;
@using System.Web;
@{
    Layout = "~/Areas/CMS/Views/Shared/_LayoutCms.cshtml";
}
@*<script type="text/javascript">
        $(document).ready(function () {
            var builder = new Formio.FormBuilder(document.getElementById("builder"), {}, { noDefaultSubmitButton: true });
        });
    </script>
    <div id="builder"></div>*@

<script type="text/javascript">

    //Formio.use(barchart);
</script>
@*@(Html.Kendo().CheckBox().Name("EnableIndexPage").Label("Enable Index Page"))*@
<input type="checkbox" id="EnableIndexPage">
<label>&nbsp;Enable Index Page</label>

<div class="card card-body bg-light">
    <div id="builder"></div>
</div>
<h4>Rendered Form</h4>
<div class="card card-body bg-light">
    <div id="formio"></div>
</div>
<h4>Submission Data</h4>
<div class="card card-body bg-light jsonviewer">
    <pre id="json"></pre>
</div>
<script type="text/javascript">
    Formio.builder(document.getElementById('builder'), {}, {
        builder: {
            basic: false,
            advanced: false,
            data: false,
            layout: false,
            premium: false,
            customBasic: {
                title: 'Basic Components',
                default: true,
                weight: 0,
                components: {
                    checkmatrix: true,
                    url: true,
                    barchart: true
                }
            }
        }
    }).then(function (builder) {
        Formio.createForm(document.getElementById('formio'), builder.form).then(function (instance) {
            var json = document.getElementById('json');
            instance.on('change', function () {
                json.innerHTML = '';
                json.appendChild(document.createTextNode(JSON.stringify(instance.submission, null, 4)));
            });
            builder.on('change', function (schema) {
                if (schema.components) {
                    instance.resetValue();
                    instance.form = schema;
                }
            });
        });
    });
</script>