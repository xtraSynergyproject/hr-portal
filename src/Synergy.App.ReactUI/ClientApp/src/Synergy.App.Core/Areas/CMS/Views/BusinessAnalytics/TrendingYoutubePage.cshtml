@using Synergy.App.ViewModel;
@using Synergy.App.Common;
@inject Synergy.App.Common.IUserContext _userContext

@{
    ViewData["Title"] = "Trending Youtube Posts";
    Layout = null;
    //Layout = "~/Areas/Core/Views/Shared/Themes/HR/_Layout.cshtml";
}
<style>
    body {
        font-family: 'Inter', sans-serif;
    }

    .ag-header-cell-text {
        color: black;
        font-weight: 200;
        font-size: medium;
    }

    .ag-row:hover {
        background-color: #fbfcfd;
    }

    .ag-header-cell {
        /*background-color: #DCDCDC;*/
        background-color: #fff;
        color: black;
    }



    .ag-root-wrapper-body.ag-layout-normal {
        min-height: 550px !important;
    }
</style>

<script>
    $(function () {
        getAllTrendingYoutubePosts();
    });

    var YcolumnDefs = [
        {
            field: "videoId",
            headerName: 'Video Link',
            maxWidth: 100,
            cellRenderer: params => {
                debugger;

                return "<a href=\"" + params.value + "\" target='_blank'><i class='fa-solid fa-arrow-up-right-from-square'></i></a>";
            }

        },
        {
            field: "channelTitle",
            headerName: 'Channel Name',
        },
        {
            field: "title",
            headerName: 'Video Name',
        },
        {
            field: "description",
            headerName: 'Video Description',
        },
        {
            headerName: "Favorite Count",
            field: "favoriteCount"
        },
        {
            headerName: "Like Count",
            field: "likeCount"
        },
        {
            headerName: "View Count",
            field: "viewCount"
        },
        {
            headerName: "Comments",
            field: "commentCount",
            maxWidth: 140,
        },
        {
            headerName: "Location",
            field: "location",
        },
        {
            field: "publishedAt",
            headerName: 'Published Date',
            cellRenderer: params => {
                debugger;
                var date = new Date(params.value);
                return date.getDate() + "." + (date.getMonth() + 1) + "." + date.getFullYear() + "  " + date.toLocaleTimeString();
            }
        }
    ];

    function getAllTrendingYoutubePosts() {
        document.getElementById("YoutubeGrid").innerHTML = "";
        gridConfig(
            "YoutubeGrid",
            "/Cms/BusinessAnalytics/GetYoutubeData?locationName=@ViewBag.LocationName",
            YcolumnDefs,
            false,
            true,
            true,
            true,
            1,
            true,
            10);
    }
    function onBackButton() {
        window.location.reload();
    }
</script>

<div class="card shadow" style="margin: 30px;">
    <div class="card-body" style="padding-bottom: 0">
        <div class="row" style="margin-bottom: 5px;">
            <div class="col-10" style="justify-content: center">
                <h1>Trending Youtube Posts</h1>
            </div>
            <div class="col-2">
                <button type='button' class='btn btn-outline-primary shadow-sm' onclick='onBackButton()' style="float: right; width: 150px;">
                    <span class="button-body">
                        <i class="fas fa-long-arrow-alt-left"></i>
                        <span class="button-text">Back</span>
                    </span>
                </button>
            </div>
        </div>

        <hr />

        <div class="row">
            <div class="col-12">
                <div id="YoutubeGrid" style="width: 100%; height: 100%;" class="ag-theme-material"></div>
            </div>
        </div>

    </div>
</div>
