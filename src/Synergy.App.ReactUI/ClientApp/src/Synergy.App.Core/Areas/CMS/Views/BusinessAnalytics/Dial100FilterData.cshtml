@using Synergy.App.ViewModel;
@using Synergy.App.Common;
@inject Synergy.App.Common.IUserContext _userContext

@{
    ViewData["Title"] = @ViewBag.ChartName;
    //Layout = null;
    Layout = "~/Areas/Core/Views/Shared/_PopupLayout.cshtml";
}



<script>

    

    $(function () {
        
        getPostsList("@ViewBag.param");



    });

    var columnDefs = [
        {
            field: "caller_name",
            headerName: 'caller_name',

        },
        {
            field: "caller_number",
            headerName: 'caller_number',
        },
        {
            headerName: "event_number",
            field: "event_number",
            maxWidth: 140,
        },
        {
            headerName: "event_remark",
            field: "event_remark",
        },
        {
            headerName: "event_type",
            field: "event_type",
        },
        {
            headerName: "event_subType",
            field: "event_subType",
        },
        {
            headerName: "latitude",
            field: "latitude",
        },
        {
            headerName: "longitude",
            field: "longitude",
        },
        {
            headerName: "district_Code",
            field: "district_Code",
        },
        {
            headerName: "police_Station",
            field: "police_Station",
        },
        {
            headerName: "Frv_Code",
            field: "Frv_Code",
        },
        {
            headerName: "dispatch_Time",
            field: "dispatch_Time",
        },
        {
            headerName: "acknowledge_Time",
            field: "acknowledge_Time",
        },
        {
            headerName: "enroute_Time",
            field: "enroute_Time",
        },
        {
            headerName: "arrival_Time",
            field: "arrival_Time",
        },
        {
            headerName: "closing_Time",
            field: "closing_Time",
        },
        {
            headerName: "disposition_Code",
            field: "disposition_Code",
        },
        {
            field: "event_time",
            headerName: 'event_time',
            cellRenderer: params => {
                
                var date = new Date(params.value);
                return date.getDate() + "." + (date.getMonth() + 1) + "." + date.getFullYear() + "  " + date.toLocaleTimeString();
            }
        }
    ];

    function getPostsList(p) {
        debugger;
        document.getElementById("drillDownData").innerHTML = "";
        gridConfig(
            "drillDownData",
            "/cms/BusinessAnalytics/getDial100FilterResults?searchStr="+p,
            columnDefs,
            false,
            true,
            true,
            true,
            1,
            true,
            10);
    }

</script>


<div style="margin: 10px 30px;">
    <h2>@ViewBag.ChartName</h2>


    <div class="row">
        <div class="col-12">
            <div id="drillDownData" style="width: 100%;height:550px" class="ag-theme-alpine"></div>
        </div>
    </div>
</div>
