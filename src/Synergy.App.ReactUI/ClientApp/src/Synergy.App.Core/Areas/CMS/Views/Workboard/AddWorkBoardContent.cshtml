@using Synergy.App.ViewModel;
@using Synergy.App.Common;

@model WorkBoardItemViewModel 
@{
    ViewData["Title"] = "Add Work Board Content";
    //Layout = ViewBag.Layout != null ? ViewBag.Layout : null;
    Layout = "/Areas/Core/Views/Shared/_PopupLayout.cshtml";
    //Layout = null;
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous" />

<style>
    svg {
        height: 24px;
        width: 24px;
        fill: #6d6e70;
    }

    .nav-fill .nav-item .nav-link, .nav-justified .nav-item .nav-link {
        height: 60px;
        color: #6d6e70;
    }
    
    .nav li:hover svg {
        fill: #3bafda;
    }

    .nav li:hover .card-title {
        color: #3bafda;
    }

    .nav li a.active svg {
        fill: #3bafda;
    }

    .nav li a.active .card-title {
        color: #3bafda;
    }

    .cancel-button, .save-button {
        float: right;
        margin: 4px 7px 4px 4px;
        color: #fff;
        border: 2px solid #fff;
        border-radius: 5px;
        text-align: center;
        padding: 0;
        /*margin-left: 10px;*/
        width: 32px;
        height: 32px;
    }

    .color-button {
        padding: 5px 10px;
        color: #fff;
        order: 0;
        vertical-align: central;
        width: 60%;
    }

    .cancel-button {
        background: #eb7c63;
        order: 2;
    }

    .save-button {
        background: #33e7b5;
        order: 1;
    }

    .titlebar svg {
        fill: #fff;
        height: 15px;
        width: 15px;
    }

    .titlebar {
        width: 100%;
        height: 40px;
    }

    .card-content {
        position: absolute;
        top: 115px;
        width: 100%;
        margin: 10px 0;
        padding-left: 20px;
        padding-right: 20px;
        height: calc(100% - 135px);
    }

    .card-textarea {
        width: 100%;
        margin: 10px 0;
        border: 0;
        resize: none;
        font-size: 32pt;
        padding-left: 10px;
        padding-right: 10px;
        height: 100%;
        font-family: "Open Sans",Helvetica,Arial,sans-serif;
        cursor: text;

    }

    .indexcard-textarea {
        width: 100%;
        /*margin: 10px 0;*/
        height: 72px;
        resize: none;
        font-size: 20pt;
        line-height: 65px;
        padding-left: 15px;
        padding-right: 15px;
        border: 0;
        border-bottom: 1px solid #eb7c63;
        font-family: "Open Sans",Helvetica,Arial,sans-serif;
        cursor: text;
    }

    .btn-outline-primary {
        color: #28a5d4;
        background: #fff;
        border-color: #ccc;
    }

        .btn-outline-primary:hover, .btn-outline-primary:focus, .btn-outline-primary:active {
            color: #28a5d4;
            border-color: #28a5d4;
            background: #e0f6ff;
        }

    hr {
        color: dodgerblue;
        margin-top: 50px;
    }



    .btn-check:active + .btn-outline-primary, .btn-check:checked + .btn-outline-primary, .btn-outline-primary.active, .btn-outline-primary.dropdown-toggle.show, .btn-outline-primary:active, .btn-outline-primary.dropdown-toggle.show:focus {
        color: #28a5d4;
        border-color: #28a5d4;
        background: #e0f6ff;
        /*box-shadow: rgb(13 110 253 / 50%) 0px 0px 0px 0.25rem;*/
        box-shadow: none;
    }

    .last-line {
        position: absolute;
        bottom: 0;
        left: 0;
        border-top: 1px solid #d6dbe1;
        width: 100%;
    }

    .whiteboard-content {
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
    }

        .whiteboard-content svg {
            height: 15px;
            width: 15px;
            fill: #fff;
            margin-bottom: 2px;
        }

    .image-search {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        margin: 8px 20px 0;
        padding: 0 0 10px;
        position: relative;
        z-index: 101;
        border-bottom: 1px solid #d6dbe1;
    }
    .search-bar {
        flex: 1;
        position: relative;
    }
    .search{
        cursor: pointer;
    position: absolute;
    right: 25px;
    top: 5.5px;
    
    }
    .palette-color {
        flex: 0 0 20px;
        height: 18px;
        width: 18px;
        margin: 3px 4px 3px 3px;
        float: left;
        border-radius: 50%;
    }
    .k-colorpicker {
        height: 30px !important;
        margin: 5px !important;
    }
</style>

<script>
    $(document).ready(function () {
        
        if ('@Model.DataAction'=='@DataActionEnum.Edit') {
            var title_color = '@Model.ColorCode';
            $(".titlebar").css("background-color", title_color);
            document.getElementById("textarea-tab").classList.remove("active");
            document.getElementById("textarea").classList.remove("active");
            document.getElementById("textarea").classList.remove("show");
            $("#textarea-tab").hide();
            $("#wb-tab").hide();
            $("#img-tab").hide();
            $("#video-tab").hide();
            $("#indexCard-tab").hide();
            $("#file-tab").hide();
            if ('@Model.ItemType' == '@WorkBoardItemTypeEnum.Text') {
                $("#textarea-tab").show();
                document.getElementById("textarea-tab").classList.add("active");
                document.getElementById("textarea").classList.add("active");
                document.getElementById("textarea").classList.add("show");
            }
            else if ('@Model.ItemType' == '@WorkBoardItemTypeEnum.WhiteBoard') {
                $("#wb-tab").show();
                document.getElementById("wb-tab").classList.add("active");
                document.getElementById("wb").classList.add("active");
                document.getElementById("wb").classList.add("show");
                $("#drawingimage").attr("src", "/cms/Document/GetImageMongo?id=@Model.ItemFileId");
            }
            else if ('@Model.ItemType' == '@WorkBoardItemTypeEnum.Image') {
                $("#img-tab").show();
                document.getElementById("img-tab").classList.add("active");
                document.getElementById("img").classList.add("active");
                document.getElementById("img").classList.add("show");
            }
            else if ('@Model.ItemType' == '@WorkBoardItemTypeEnum.Video') {
                $("#video-tab").show();
                document.getElementById("video-tab").classList.add("active");
                document.getElementById("video").classList.add("active");
                document.getElementById("video").classList.add("show");
            }
            else if ('@Model.ItemType' == '@WorkBoardItemTypeEnum.Index') {
                $("#indexCard-tab").show();
                document.getElementById("indexCard-tab").classList.add("active");
                document.getElementById("indexCard").classList.add("active");
                document.getElementById("indexCard").classList.add("show");
            }
            else if ('@Model.ItemType' == '@WorkBoardItemTypeEnum.File') {
                $("#file-tab").show();
                document.getElementById("file-tab").classList.add("active");
                document.getElementById("file").classList.add("active");
                document.getElementById("file").classList.add("show");
            }
        }

    });
    function onPickerSelect(e) {
        
        /*kendoConsole.log("Select in picker #" + this.element.attr("id") + " :: " + e.value);*/
        var title_color = e.value;
        $(".titlebar").css("background-color", title_color);
    }
    function onPickerChange(e) {
        
        /*kendoConsole.log("Select in picker #" + this.element.attr("id") + " :: " + e.value);*/
        var title_color = e.value;
        $(".titlebar").css("background-color", title_color);
    }

    function OnSave(e) {

        var itype = document.getElementsByClassName('nav-link active')[0].id;
        if (itype == "textarea-tab") {
            $("#ItemType").val('@WorkBoardItemTypeEnum.Text');
        }
        else if (itype == "wb-tab") {
            $("#ItemType").val('@WorkBoardItemTypeEnum.WhiteBoard');
        }
        else if (itype == "img-tab") {
            $("#ItemType").val('@WorkBoardItemTypeEnum.Image');
        }
        else if (itype == "video-tab") {
            $("#ItemType").val('@WorkBoardItemTypeEnum.Video');
        }
        else if (itype == "indexCard-tab") {
            $("#ItemType").val('@WorkBoardItemTypeEnum.Index');
        }
        else if (itype == "file-tab") {
            $("#ItemType").val('@WorkBoardItemTypeEnum.File');
        }
        else {
            $("#ItemType").val('@WorkBoardItemTypeEnum.Text');
        }

        //var textcolor = $(".ddlText").text();
        //if (textcolor == "Yellow") {
        //    $("#ColorCode").val('#f9eb71');
        //}
        //else if (textcolor == "Pink") {
        //    $("#ColorCode").val('#ee85c1');
        //}
        //else if (textcolor == "Green") {
        //    $("#ColorCode").val('#a7d96d');
        //}
        //else if (textcolor == "Blue") {
        //    $("#ColorCode").val('#4bc1ec');
        //}
        //else if (textcolor == "Purple") {
        //    $("#ColorCode").val('#ac8fef');
        //}
        //else if (textcolor == "Grey") {
        //    $("#ColorCode").val('#a0adbd');
        //}
        //else {
        //    $("#ColorCode").val('#f9eb71');
        //}

    }

    var onAjaxSuccess = function (res) {

        var action = "addItem";
        if (res.success) {
            if ('@Model.DataAction'=='@DataActionEnum.Create')
            {
                ShowNotification("@SharedResource["SavedSuccessfully"]", "success");
            }
            if ('@Model.DataAction'=='@DataActionEnum.Edit')
            {
                action = "changeItem";
                ShowNotification("@SharedResource["UpdatedSuccessfully"]", "success");
            }
            closeWorkBoardContent(res.result,action);
        }
        else {

            $(".text-danger").removeClass("validation-summary-valid");
            $(".text-danger").addClass("validation-summary-errors");
            $(".text-danger").html(res.error);

        }
    };
    function closeWorkBoardContent(note, action) {
        
        var win = GetMainWindow();
        win.CloseWindow({ MethodName: action, Prms: { note } });
        return false;
    }
    function onFileUploadSuccess() {
        
        $("#AttachmentFileId").dmUploader({ //
            url: '/Cms/Document/SaveFile',
            multiple: false,
            extFilter: ["jpg", "jpeg", "png", "gif"],
            maxFileSize: 3000000, // 3 Megs
            onDragEnter: function () {
                // Happens when dragging something over the DnD area
                this.addClass('active');
            },
            onDragLeave: function () {
                this.removeClass('active');
            },
            onInit: function () {
            },
            onComplete: function () {
            },
            onNewFile: function (id, file) {
                ui_multi_add_file(id, file);
            },
            onBeforeUpload: function (id) {
                ui_multi_update_file_status(id, 'uploadiModelg', 'Uploading...');
                ui_multi_update_file_progress(id, 0, '', true);
            },
            onUploadCanceled: function (id) {
                ui_multi_update_file_status(id, 'warning', 'Canceled by User');
                ui_multi_update_file_progress(id, 0, 'warning', false);
            },
            onUploadProgress: function (id, percent) {
                ui_multi_update_file_progress(id, percent);
            },
            onUploadSuccess: function (id, data) {
                $(".style-myiconimage").attr("src", "/cms/Document/GetImageMongo?id=" + data.fileId);
                $("#AttachmentFileId").val(data.fileId);

                ui_multi_update_file_status(id, 'success', 'Upload Complete');
                ui_multi_update_file_progress(id, 100, 'success', false);
            },
            onUploadError: function (id, xhr, status, message) {
                ui_multi_update_file_status(id, 'danger', message);
                ui_multi_update_file_progress(id, 0, 'danger', false);
            },
            onFallbackMode: function () {
            },
            onFileSizeError: function (file) {
            }
        });

        function onIconDel() {
            //
            //        alert("Banner Delete");
            $(".style-myiconimage").attr("src", "/images/200.png");
            $("#AttachmentFileId").val('');
            //var iconupload = $("#files1").data("kendoUpload");
            ////console.log(bannerupload);
            //iconupload.clearFile(function (file) { return true; });
            $("#iconFile1").dmUploader("reset");

        }
    }
    function onFileFileUploadSuccess() {
        
        $("#AttachmentFileId").dmUploader({ //
            url: '/Cms/Document/SaveFile',
            multiple: false,
            extFilter: ["pdf", "txt"],
            maxFileSize: 3000000, // 3 Megs
            onDragEnter: function () {
                // Happens when dragging something over the DnD area
                this.addClass('active');
            },
            onDragLeave: function () {
                this.removeClass('active');
            },
            onInit: function () {
            },
            onComplete: function () {
            },
            onNewFile: function (id, file) {
                ui_multi_add_file(id, file);
            },
            onBeforeUpload: function (id) {
                ui_multi_update_file_status(id, 'uploading', 'Uploading...');
                ui_multi_update_file_progress(id, 0, '', true);
            },
            onUploadCanceled: function (id) {
                ui_multi_update_file_status(id, 'warning', 'Canceled by User');
                ui_multi_update_file_progress(id, 0, 'warning', false);
            },
            onUploadProgress: function (id, percent) {
                ui_multi_update_file_progress(id, percent);
            },
            onUploadSuccess: function (id, data) {
                $(".style-myiconimage").attr("src", "/cms/Document/GetImageMongo?id=" + data.fileId);
                $("#AttachmentFileId").val(data.fileId);

                ui_multi_update_file_status(id, 'success', 'Upload Complete');
                ui_multi_update_file_progress(id, 100, 'success', false);
            },
            onUploadError: function (id, xhr, status, message) {
                ui_multi_update_file_status(id, 'danger', message);
                ui_multi_update_file_progress(id, 0, 'danger', false);
            },
            onFallbackMode: function () {
            },
            onFileSizeError: function (file) {
            }
        });

        function onIconDel() {
            //
            //        alert("Banner Delete");
            $(".style-myiconimage").attr("src", "/images/200.png");
            $("#AttachmentFileId").val('');
            //var iconupload = $("#files1").data("kendoUpload");
            ////console.log(bannerupload);
            //iconupload.clearFile(function (file) { return true; });
            $("#iconFile1").dmUploader("reset");

        }
    }
</script>


<form asp-area="Cms" asp-controller="Workboard" asp-action="ManageWorkBoardContent" method="post" class="form-horizontal" id="myForm" data-ajax-begin="onAjaxBegin" data-ajax-complete="onAjaxComplete"
      data-ajax-failure="onAjaxFailed" data-ajax-success="onAjaxSuccess"
      data-ajax="true" data-ajax-method="POST">
    <div id="validation-summary" class="text-danger" asp-validation-summary="All"></div>
    <div class="titlebar" style="background-color: rgb(249, 235, 113);">
            @*@(Html.Kendo().ColorPickerFor(m => m.ColorCode)
                        .Palette(new string[] {
                        "#f9eb71","#ee85c1","#a7d96d","#4bc1ec","#ac8fef","#a0adbd"
                        }).TileSize(30).Value(Model.ColorCode!=null ? Model.ColorCode.ToString() : "#f9eb71")
                        .Events(e=>e.Select("onPickerSelect").Change("onPickerChange"))
                            //.HtmlAttributes(new { @class = "color-button" })
                            )*@
        @* Close Button *@
        <button class="cancel-button" onclick='CloseContentBoard()'>
            <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.3 5.71a.996.996 0 00-1.41 0L12 10.59 7.11 5.7A.996.996 0 105.7 7.11L10.59 12 5.7 16.89a.996.996 0 101.41 1.41L12 13.41l4.89 4.89a.996.996 0 101.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"></path></svg>
        </button>
        @* Save Button *@
        <button class="save-button" value="Save" onclick="OnSave();">
            <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.79 15.88l-3.47-3.47a.996.996 0 10-1.41 1.41L8.09 18c.39.39 1.02.39 1.41 0L20.09 7.42a.996.996 0 10-1.41-1.41z"></path></svg>
        </button>
        @* Color Change Button *@
        @*<div class="color-button">
            <div class="dropdown">
                <button class="btn btn-outline-primary btn-sm dropdown-toggle ddlText" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" spellcheck="" style="font-size: 0.8em;">
                    Yellow
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                    <li onclick="colour('Yellow')"><a class="dropdown-item" id="Yellow" color="#f9eb71" selected="selected">
                        <div class="palette-color" style="background-color:#f9eb71;"></div>
                        Yellow</a></li>
                    <li onclick="colour('Pink')"><a class="dropdown-item" id="Pink" color="#ee85c1">
                        <div class="palette-color" style="background-color:#ee85c1;"></div>
                        Pink</a></li>
                    <li onclick="colour('Green')"><a class="dropdown-item" id="Green" color="#a7d96d">
                        <div class="palette-color" style="background-color:#a7d96d;"></div>
                        Green</a></li>
                    <li onclick="colour('Blue')"><a class="dropdown-item" id="Blue" color="#4bc1ec">
                        <div class="palette-color" style="background-color:#4bc1ec;"></div>
                        Blue</a></li>
                    <li onclick="colour('Purple')"><a class="dropdown-item" id="Purple" color="#ac8fef">
                        <div class="palette-color" style="background-color:#ac8fef;"></div>
                        Purple</a></li>
                    <li onclick="colour('Grey')"><a class="dropdown-item" id="Grey" color="#a0adbd">
                        <div class="palette-color" style="background-color:#a0adbd;"></div>
                        Grey</a></li>
                </ul>
            </div>
        </div>*@
    </div>

    <section>

        <ul class="nav nav-tabs nav-fill mb-3" id="myTab" role="tablist">
            @* Text Area Tab *@
            <li class="nav-item waves-effect waves-light" id="li-textarea-tab">
                <a class="nav-link active" id="textarea-tab" data-toggle="tab" href="#textarea" role="tab" aria-controls="textarea" aria-selected="false">
                    <div class="ns-text" data-nodetype="1">
                        <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 5h-3v9c0 .55-.45 1-1 1s-1-.45-1-1V8H8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1z"></path></svg>
                        <div class="card-title">Text</div>
                    </div>

                </a>
            </li>
            @* WhiteBoard Tab *@
            <li class="nav-item waves-effect waves-light" id="li-wb-tab">
                <a class="nav-link" id="wb-tab" data-toggle="tab" href="#wb" role="tab" aria-controls="wb" aria-selected="false">
                    <div class="ns-text" data-nodetype="1">
                        <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 16H7c-.55 0-1-.45-1-1s.45-1 1-1h10c.55 0 1 .45 1 1s-.45 1-1 1z"></path><path d="M22 7.86v10.28c0 1.03-.83 1.86-1.86 1.86H15v1c0 .55-.45 1-1 1h-4c-.55 0-1-.45-1-1v-1H3.86C2.83 20 2 19.17 2 18.14V7.86C2 6.83 2.83 6 3.86 6h12.17l1.86-1.86 2.12 2.12L18.26 8l-4.7 4.7c-.19.19-.45.3-.72.29l-1.44-.02c-.13 0-.24-.11-.24-.24l-.02-1.41c0-.28.1-.54.3-.74L14.02 8H4v10h16V9.08l1.87-1.87c.09.2.13.42.13.65zM21.37 4.9l-.65.65-2.12-2.12.64-.65c.39-.39 1.03-.39 1.42 0l.71.71c.39.38.39 1.02 0 1.41z"></path></svg>
                        <div class="card-title">Whiteboard</div>
                    </div>
                </a>
            </li>
            @* Image Tab *@
            <li class="nav-item waves-effect waves-light" id="li-img-tab">
                <a class="nav-link" id="img-tab" data-toggle="tab" href="#img" role="tab" aria-controls="img" aria-selected="true">
                    <div class="ns-text" data-nodetype="1">
                        <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM6 5c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm12.76 14H5.24c-.21 0-.33-.24-.2-.41l3.12-3.9c.1-.12.29-.12.39 0l1.58 1.97 3.44-4.31c.1-.12.29-.12.39 0l5 6.24c.13.17.01.41-.2.41z"></path></svg>
                        <div class="card-title">Image</div>
                    </div>
                </a>
            </li>
            @* Video Tab *@
            <li class="nav-item waves-effect waves-light" id="li-video-tab">
                <a class="nav-link disabled" id="video-tab" data-toggle="tab" href="#video" role="tab" aria-controls="video" aria-selected="false" aria-disabled="true">
                    <div class="ns-text" data-nodetype="1">
                        <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.72 7.28L18 10V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4l2.72 2.72c.47.47 1.28.14 1.28-.53V7.81c0-.67-.81-1-1.28-.53zM15 8h-2c-.55 0-1-.45-1-1s.45-1 1-1h2c.55 0 1 .45 1 1s-.45 1-1 1z"></path></svg>
                        <div class="card-title">Video</div>
                    </div>
                </a>
            </li>
            @* Index Card Tab *@
            <li class="nav-item waves-effect waves-light" id="li-indexCard-tab">
                <a class="nav-link" id="indexCard-tab" data-toggle="tab" href="#indexCard" role="tab" aria-controls="indexCard" aria-selected="false">
                    <div class="ns-text" data-nodetype="1">
                        <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 3h-.24C20 3 21 4 21 5.24V5c0-1.1-.9-2-2-2zM3 5v.24C3 4 4 3 5.24 3H5c-1.1 0-2 .9-2 2z"></path><path d="M18.76 3H5.24C4 3 3 4 3 5.24V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5.24C21 4 20 3 18.76 3zM19 8v11H5V8h14z"></path><path d="M12 16H8c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1zM16 12H8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1z"></path></svg>
                        <div class="card-title">Index Card</div>
                    </div>
                </a>
            </li>
            @* File Tab *@
            <li class="nav-item waves-effect waves-light" id="li-file-tab">
                <a class="nav-link" id="file-tab" data-toggle="tab" href="#file" role="tab" aria-controls="file" aria-selected="false">
                    <div class="ns-text" data-nodetype="1">
                        <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 6h-8l-1.41-1.41C10.21 4.21 9.7 4 9.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-2 8h-2v2c0 .55-.45 1-1 1s-1-.45-1-1v-2h-2c-.55 0-1-.45-1-1s.45-1 1-1h2v-2c0-.55.45-1 1-1s1 .45 1 1v2h2c.55 0 1 .45 1 1s-.45 1-1 1z"></path></svg>
                        <div class="card-title">File</div>
                    </div>
                </a>
            </li>
        </ul>
        @* Tab Contents *@
        <div class="tab-content" id="myTabContent">
            @* Text Area Content *@
            <div class="tab-pane fade active show" id="textarea" role="tabpanel" aria-labelledby="textarea-tab">
                <div class="card-content">
                    <textarea class="card-textarea" data-recording-sensitive="" spellcheck="false" asp-for="ItemContent"></textarea>

                    <div class="last-line">
                        <span style="float:right;margin-right: 20px;">xyz</span>
                    </div>
                </div>
            </div>
            @* WhiteBoard Content *@
            <div class="tab-pane fade" id="wb" role="tabpanel" aria-labelledby="wb-tab">
                <div class="card-content">
                    <div class="whiteboard-content" id="createdrawingcontent">
                        <div style="margin-bottom: 10px; padding: 0 15%; text-align: center;">
                            Whiteboarding sessions are collaborative, realtime,
                            and automatically save as you work.
                        </div>
                        <div>
                            <button type='button' class='btn btn-primary btn-sm shadow' onclick=''>
                                <span class="button-body">
                                    <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" focusable="false" role="img" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M8 7h3.5a.5.5 0 110 1H8v3.5a.5.5 0 11-1 0V8H3.5a.5.5 0 010-1H7V3.5a.5.5 0 011 0V7zm-.5-7C11.636 0 15 3.364 15 7.5S11.636 15 7.5 15 0 11.636 0 7.5 3.364 0 7.5 0zm0 .882a6.618 6.618 0 100 13.236A6.618 6.618 0 007.5.882z"></path>
                                    </svg>
                                    <span class="button-text" onclick="createDrawingBoard()">Start a New Whiteboard</span>
                                </span>
                            </button>
                        </div>
                    </div>

                    <div id="drawingContent" style="display:none;text-align:center">
                        <div style="border:1px solid black">
                            <img id="drawingimage" src="" style="width:200px;height:200px;" />
                        </div>
                        <br/>
                        <button type='button' class='btn btn-primary btn-sm shadow' onclick=''>
                            <span class="button-body">
                               <span class="fas fa-file-edit"></span>
                                <span class="button-text" onclick="editDrawingBoard()">Edit Whiteboard</span>
                            </span>
                        </button>
                    </div>
                </div>
            </div>
            @* Image Content *@
            <div class="tab-pane fade " id="img" role="tabpanel" aria-labelledby="img-tab">
                <div class="card-content">
                    @*<div class="navbar-form image-search">
                        <div class="search-app-icon">
                            <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM6 5c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm12.76 14H5.24c-.21 0-.33-.24-.2-.41l3.12-3.9c.1-.12.29-.12.39 0l1.58 1.97 3.44-4.31c.1-.12.29-.12.39 0l5 6.24c.13.17.01.41-.2.41z"></path></svg>
                        </div>
                        <div class="search-bar">

                            <input id="query-input" type="text" class="form-control search-query search-image" placeholder="Search for images on Pexels..." data-recording-sensitive="" style="padding-right: 40px; width: 100%;">

                            <div class="search">
                                <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 19.3l-4.7-4.71c-.38-.38-.89-.59-1.42-.59h-.4a6.5 6.5 0 10-.19.19v.4c0 .53.21 1.04.59 1.42l4.71 4.7a.996.996 0 101.41-1.41zM9.5 14.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"></path></svg>
                            </div>
                        </div>
                    </div>*@
                    <div class="col-12 pad-15 no-gutters" style="min-height:130px;">
                        @{
                            await Html.RenderPartialAsync("~/Areas/Core/Views/Shared/_FileUpload.cshtml", new FileUploadViewModel { Property = nameof(Model.ItemFileId), Value = Model.ItemFileId, CallbackMethod = "onFileUploadSuccess" });
                        }
                    </div>

                </div>
            </div>
            @* Video Content *@
            <div class="tab-pane fade" id="video" role="tabpanel" aria-labelledby="video-tab">
                <div class="card-content">
                    Video
                </div>
            </div>
            @* Index Card Content *@
            <div class="tab-pane fade" id="indexCard" role="tabpanel" aria-labelledby="indexCard-tab">
                <div class="card-content">
                    <textarea class="indexcard-textarea" data-recording-sensitive="" spellcheck="false" asp-for="ItemContentIndex"></textarea>

                    <hr />
                    <hr />
                    <hr />
                    <hr />
                    <div class="last-line">
                        <span style="float:right;margin-right: 20px;">xyz</span>
                    </div>
                </div>
            </div>
            @* File Content *@
            <div class="tab-pane fade" id="file" role="tabpanel" aria-labelledby="file-tab">
                <div class="card-content">
                    <div class="col-12 pad-15 no-gutters" style="min-height:130px;">

                        @{
                            await Html.RenderPartialAsync("~/Areas/Core/Views/Shared/_FileUpload.cshtml", new FileUploadViewModel { Property = nameof(Model.ItemFileFileId), Value = Model.ItemFileFileId, CallbackMethod = "onFileFileUploadSuccess" });
                        }
                    </div>
                </div>
            </div>
        </div>

    </section>

    @Html.HiddenFor(x => x.Id)
    @Html.HiddenFor(x => x.DataAction)
    @Html.HiddenFor(x => x.NoteId)
    @Html.HiddenFor(x => x.ItemType)
    @Html.HiddenFor(x => x.WorkBoardId)
    @Html.HiddenFor(x => x.ParentId)
    @Html.HiddenFor(x => x.ColorCode)
    @Html.HiddenFor(x => x.ItemFileId)
    @Html.HiddenFor(x => x.ItemFileFileId)
    @Html.HiddenFor(x => x.IconFileId)
    @Html.HiddenFor(x => x.WorkBoardSectionId)
    @Html.HiddenFor(x => x.WorkBoardItemId)
    @Html.HiddenFor(x => x.NtsNoteId)
    @Html.HiddenFor(x => x.CompanyId)
    @Html.HiddenFor(x => x.CreatedBy)
    @Html.HiddenFor(x => x.CreatedDate)
    @Html.HiddenFor(x => x.LastUpdatedBy)
    @Html.HiddenFor(x => x.LastUpdatedDate)
</form>

<script>

    $(document).ready(function () {
        var fileId = $("#ItemFileId").val();
        if (fileId != null && fileId != "") {
            document.getElementById("createdrawingcontent").style.display = "none";
            document.getElementById("drawingContent").style.display = "";
            $("#drawingimage").attr("src", "/cms/Document/GetImageMongo?id=" + data.id);
            $("#ItemFileId").val(data.id);
        }
    });

    $('.card-textarea').focus();

    $('#textarea-tab').click(function () {
        $('.card-textarea').focus();
    });

    $('#index-card').click(function () {
        $('indexcard-textarea').focus();
    });

    function colour(color) {
        var title_color = $("#" + color).attr("color");
        $("#" + color).click(function () {
            $(".ddlText").text(color);
            $(".titlebar").css("background-color", title_color);
        });
    }

    function CloseContentBoard() {
        var win = GetMainWindow();
        win.CloseWindow();
        return false;
    }

    function closeNavMemberGroup() {
        alert("content save successfully");
        var win = GetMainWindow();
        win.CloseWindow();
        return false;
    }

    function closeNavDrawing(data) {
        document.getElementById("createdrawingcontent").style.display = "none";
        document.getElementById("drawingContent").style.display = "";
        $("#drawingimage").attr("src", "/cms/Document/GetImageMongo?id=" + data.id);
        $("#ItemFileId").val(data.id);
    }

    function createDrawingBoard() {
        var url = "/Cms/Workboard/createDrawingBoard";
        var win = GetMainWindow();
        win.iframeOpenUrl = url;
        win.OpenWindow({ Title: 'Drawing Board', Width: 800, Height: 800 });
        return false;
    }

    function editDrawingBoard() {
        var url = "/Cms/Workboard/createDrawingBoard?id=" + $("#ItemFileId").val();
        var win = GetMainWindow();
        win.iframeOpenUrl = url;
        win.OpenWindow({ Title: 'Drawing Board', Width: 800, Height: 800 });
        return false;
    }


</script>