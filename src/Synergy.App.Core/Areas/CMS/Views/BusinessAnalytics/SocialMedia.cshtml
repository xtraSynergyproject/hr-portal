@{
	Layout = null;
			//Layout = "~/Areas/Core/Views/Shared/_Reference.cshtml";
}
@inject IStringLocalizer<CMS.UI.Web.Areas.CMS.Controllers.BusinessAnalyticsController> Resource

@using Synergy.App.ViewModel;
@using Synergy.App.Common;
<style>
	.container-fluid {
		padding: 15px;
	}   
    .grid_h4{
        text-align:center;
        border: 1px solid lightgray;
        padding: 5px;
        margin-bottom: 0px;
        background: #f8f9fa;
        font-weight: 500;
    }
    .c_box_shadow{
        box-shadow: 2px 2px 10px lightblue !important;
    }
</style>
<script>
    var skin="";
	$(document).ready(function () {		
        $("#fromDate").kendoDatePicker({
			format: "yyyy-MM-dd",
		});
        $("#toDate").kendoDatePicker({
			format: "yyyy-MM-dd",
		});	
        if('@ViewBag.Content' =='0')
        {
            $("#div_filter").hide();
        }
        else if('@ViewBag.Content' =='1')
        {
            $("#div_filter").hide();
            $("#div_s_media").hide();
            $("#div_t_media").show();
            getAllTrendingTwitterPosts();
            getAllTrendingYoutubePosts();
        }
        else if('@ViewBag.Content' =='2')
        {
            $("#div_filter").hide();
            $("#div_s_media").hide();
            $("#div_t_media").hide();
            $("#div_s_sentiment").show();
            twitterSentiment();
            facebookSentiment();
            twitterSentimentData();
            facebookSentimentData();
        }
        else if('@ViewBag.Content' =='3')
        {
            $("#div_filter").hide();
             $("#div_s_media").hide();
            $("#div_t_media").hide();
            $("#div_s_sentiment").hide();
            $("#div_wordcloud").show();
            loadWordCloud();
            
        }
        else{
            $("#div_filter").show();
            loadDdl('@ViewBag.Content');
        }
				
	});
	function loadDdl(type) {        
        if(type=="district"){ 
            $("#div_dll1").hide();            
            $("#ddl").kendoDropDownList({
			    dataTextField: "Name",
                dataValueField: "Name",
                optionLabel: "All",
			    filter: "contains",
			    dataSource: {
				    transport: {
					    read: {
						    url: "/CMS/BusinessAnalytics/GetDial100District",
					    }
				    }
			    }
		    });
        }
        else if(type !="district" && type !="event"){
            $("#div_dll1").hide();
            $("#ddl").kendoDropDownList({
			    dataTextField: "Name",
                dataValueField: "Name",
                optionLabel: "All",
			    filter: "contains",
			    dataSource: {
				    transport: {
					    read: {
                            url: "/CMS/BusinessAnalytics/GetAllKeywords?trackName="+type.replaceAll('_',' '),
					    }
				    }
			    }
		    });
        }
        else{
            $("#div_dll1").show();
            $("#div_dll").hide();
            $("#ddl1").kendoDropDownList({
			    dataTextField: "Name",
                dataValueField: "Code",
                optionLabel: "All",
			    filter: "contains",
                change: loadDdl1,
			    dataSource: {
				    transport: {
					    read: {
						    url: "/CMS/BusinessAnalytics/GetDial100EventType",
					    }
				    }
			    }
		    });
        }
		
	}
	function loadDdl1(e) {              
        var _value=e.sender._cascadedValue;
        if(_value==""){
             $("#div_dll").hide();
        }
        else{
            $("#div_dll").show();
        }
        if ('@ViewBag.Content' == "event") {            
            $("#ddl").kendoDropDownList({
			    dataTextField: "Name",
			    dataValueField: "Name",
                optionLabel: "Select",
			    filter: "contains",
			    dataSource: {
				    transport: {
					    read: {
						    url: "/CMS/BusinessAnalytics/GetDial100EventSubType?eventCode="+_value,
					    }
				    }
			    }
		    });
        }
        else {
            $("#ddl").kendoDropDownList({
			    dataTextField: "Name",
			    dataValueField: "Code",
                optionLabel: "Select",
			    filter: "contains",               
			    dataSource: {
				    transport: {
					    read: {
						    url: "/CMS/BusinessAnalytics/GetDial100EventSubType",
					    }
				    }
			    }
		    });
        }
		
	}
    function  loadSocialMedia(){
        $("#div_t_media").hide();
        $("#div_s_media").show();
        getNewsfeedData();
        getYoutubeData();
        getTwitterData();
        getFacebookData();
        getInstagramData();
    }
</script>
<hr />
<div class="container-fluid">
	<div class="row" id="div_filter" style="margin-bottom: 20px;border-bottom: 1px solid lightgray;padding-bottom: 20px;">
        <div class="col-md-2" id="div_dll1" style="display:none">
            <input id="ddl1" style="width: 100%" />
        </div>
        <div class="col-md-2" id="div_dll">
			<input id="ddl" style="width: 100%" />
		</div>		
		<div class="col-md-3">
			<input type="text" class="form-control" placeholder="Type here" id="serach_text" style="width: 100%" />
		</div> 
        <div class="col-md-2">
            <input id="fromDate" style="width: 100%" value="@DateTime.Now.AddDays(-7).ToString("yyyy-MM-dd")" />
        </div>
        <div class="col-md-2">
            <input id="toDate" style="width: 100%" value="@DateTime.Now.ToString("yyyy-MM-dd")" />
        </div>
        <div class="col-md-1">
            <button type="button" class="btn btn-primary" onclick="loadSocialMedia()">Search</button>
        </div>
	</div>
   
	<div class="row" id="div_s_media" style="display:none;">       
		<div class="col-md-12">
            <h4 class="grid_h4"><span class='k-icon k-i-rss-box k-color-primary k-icon-md'></span> News Feeds</h4>
			<div id="kgrdNewsFeed" style="width: 100%;height:550px" class="ag-theme-alpine"></div>
			<br />
            <h4 class="grid_h4"><span class='k-icon k-i-twitter-box k-color-primary k-icon-md'></span> Twitter</h4>
            <div id="kgrdTwitter" style="width: 100%;height:550px" class="ag-theme-alpine"></div>
            <br />
            <h4 class="grid_h4"><span class='k-icon k-i-youtube-box k-color-danger k-icon-md'></span> Youtube</h4>
			<div id="kgrdYoutube" style="width: 100%;height:550px" class="ag-theme-alpine"></div>
			<br />
            <h4 class="grid_h4"><span class='k-icon fab fa-instagram k-color-danger k-icon-md'></span> Instagram</h4>
			<div id="kgrdInstagram" style="width: 100%;height:550px" class="ag-theme-alpine"></div>
			<br />
            <h4 class="grid_h4"><span class='k-icon k-i-facebook-box k-color-primary k-icon-md'></span> Facebook</h4>
			<div id="kgrdFacebook" style="width: 100%;height:550px" class="ag-theme-alpine"></div>
		</div>
	</div>
    <div class="row" id="div_t_media" style="display:none;">
		<div class="col-md-12">
            <h4 class="grid_h4"><span class='k-icon k-i-twitter-box k-color-primary k-icon-md'></span> Twitter</h4>
            <div id="TwitterGrid" style="width: 100%; height: 550px;" class="ag-theme-alpine"></div>
			<br />           
            <h4 class="grid_h4"><span class='k-icon k-i-youtube-box k-color-danger k-icon-md'></span> Youtube</h4>
			<div id="YoutubeGrid" style="width: 100%;height:550px" class="ag-theme-alpine"></div>
			<br />			
		</div>
	</div>
     <div class="row" id="div_s_sentiment" style="display:none;">
        <div class="col-md-6">
            <div class="card c_box_shadow" style="border-radius: 15px; padding: 10px; height: 500px;">
                <h5 style="font-weight: 300; ">Twitter Sentiment</h5>
                <div id="TwitterSentimentNegative"></div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card c_box_shadow" style="border-radius: 15px; padding: 10px;height:500px;">
                <h5 style="font-weight: 300;">Facebook Sentiment</h5>               
                <div id="FacebookSentimentNegative"></div>
            </div>
        </div>
        <br />	
         <div class="col-md-12" style="margin-top: 15px;">
            <div class="card c_box_shadow" style="border-radius: 15px; padding: 10px;height:500px;">
                <h4 class="grid_h4"><span class='k-icon k-i-twitter-box k-color-primary k-icon-md'></span> Twitter Sentiment</h4>               
                <div id="TwitterNegativeSentimentTable" style="width: 100%;height:550px" class="ag-theme-alpine"></div>
            </div>
        </div>
        <br />
        <div class="col-md-12" style="margin-top: 15px;">
            <div class="card c_box_shadow" style="border-radius: 15px; padding: 10px;height:500px;">
                <h4 class="grid_h4"><span class='k-icon k-i-facebook-box k-color-primary k-icon-md'></span> Facebook Sentiment</h4>               
                <div id="FacebookNegativeSentimentTable" style="width: 100%;height:550px" class="ag-theme-alpine"></div>
            </div>
        </div>
	</div>
     <div class="row" id="div_wordcloud" style="display:none;">       
        <div class="col-md-12" style="margin-top: 15px;">
            <div class="card c_box_shadow" style="border-radius: 15px; padding: 10px;height:500px;">
                <img style='display:block; width: 720px;height: 480px;margin-left: 300px;' id='base64image'
                     src='' />
            </div>
        </div>
	</div>
</div>


<script>
    var TcolumnDefs = [
        {
            field: "url",
            headerName: 'Link',
            maxWidth: 150,
            cellRenderer: params => {
                debugger;
                return "<span style='display:flex; align-items:center; justify-content:center;'><a href=\"" + params.data.url + "\" target='_blank'>Visit Post</a></span>";
            }

        },
        {
            field: "name",
            headerName: 'Name',
            cellRenderer: params => {
                debugger;
                return "<span style='display:flex; align-items:center; justify-content:center;'>" + params.value + "</span>";
            }
        },
        {
            headerName: "Tweets",
            field: "tweet_volume",
            cellRenderer: params => {
                if (params.value != null) {
                    return "<span style='display:flex; align-items:center; justify-content:center;'>" + params.value + "</span>";
                }
                else {
                    return "";
                }                
            }
        },
        {
            headerName: "Location",
            field: "location",
            cellRenderer: params => {
                debugger;
                return "<span style='display:flex; align-items:center; justify-content:center;'>" + params.value + "</span>";
            }
        },
        {
            field: "created_date",
            headerName: 'Date',
            cellRenderer: params => {
                debugger;
                var date = new Date(params.value);
                return "<span style='display:flex; align-items:center; justify-content:center;'>" + date.getDate() + "." + (date.getMonth() + 1) + "." + date.getFullYear() + "  " + date.toLocaleTimeString() + "</span>";
            }
        }
    ];

    function getAllTrendingTwitterPosts() {
        document.getElementById("TwitterGrid").innerHTML = "";
        gridConfig(
            "TwitterGrid",
            //"/Cms/BusinessAnalytics/GetTwitterData?locationName=@ViewBag.LocationName",
            "/Cms/BusinessAnalytics/GetTwitterData",
            TcolumnDefs,
            false,
            true,
            true,
            true,
            1,
            true,
            10);
    }
    var YcolumnDefs = [
        {
            field: "videoId",
            headerName: 'Video Link',
            maxWidth: 100,
            cellRenderer: params => {
                debugger;

                return "<a href=\"" + params.value + "\" target='_blank'><i class='fa-solid fa-arrow-up-right-from-square'></i></a>";
            }

        },
        {
            field: "channelTitle",
            headerName: 'Channel Name',
        },
        {
            field: "title",
            headerName: 'Video Name',
        },
        {
            field: "description",
            headerName: 'Video Description',
        },
        {
            headerName: "Favorite Count",
            field: "favoriteCount"
        },
        {
            headerName: "Like Count",
            field: "likeCount"
        },
        {
            headerName: "View Count",
            field: "viewCount"
        },
        {
            headerName: "Comments",
            field: "commentCount",
            maxWidth: 140,
        },
        {
            headerName: "Location",
            field: "location",
        },
        {
            field: "publishedAt",
            headerName: 'Published Date',
            cellRenderer: params => {
                debugger;
                var date = new Date(params.value);
                return date.getDate() + "." + (date.getMonth() + 1) + "." + date.getFullYear() + "  " + date.toLocaleTimeString();
            }
        }
    ];

    function getAllTrendingYoutubePosts() {
        document.getElementById("YoutubeGrid").innerHTML = "";
        gridConfig(
            "YoutubeGrid",
            //"/Cms/BusinessAnalytics/GetYoutubeData?locationName=@ViewBag.LocationName",
            "/Cms/BusinessAnalytics/GetYoutubeData",
            YcolumnDefs,
            false,
            true,
            true,
            true,
            1,
            true,
            10);
    }
</script>

<script>





var columnDefs2 = [

                  {
                    field: "View",
                    headerName: "View",
                    minWidth: 100,
                    maxWidth: 100,
                    cellRenderer: params => {
                       return "<span class='fas fa-eye' onclick='onRssFeedView(\"" + params.data.link +"\")'></span>";
                    }
                },
                {
                    field: "name",
                    headerName: '@Resource["Name"]',
                    minWidth: 150,
                    maxWidth: 300,
                    cellRenderer: params => {
                        return "<div class='text-justify' >" + params.data.name+" </div>";
                    }
                },
                {
                    field: "title",
                    minWidth: 300,
                    //maxWidth: 400,
                    wrapText: true,
                    autoHeight: true,
                    headerName: '@Resource["Title"]',
                    cellRenderer: params => {
                        return "<p /*style='white-space: pre-wrap;'*/>" + params.data.title +" </p>";
                    }

                },
                //{
                //    field: "message",
                //    headerName: '@Resource["Message"]',
                //    minWidth: 200,
                //    maxWidth: 300,
                //    cellRenderer: params => {
                //        return "<div class='text-justify' >" + params.data.message+" </div>";
                //    }
                //},

                //{
                //    field: "author",
                //    headerName: '@Resource["Author"]',
                //    minWidth: 150,
                //    maxWidth: 300,
                //    cellRenderer: params => {
                //         if (params.data.author != null) {
                //             return "<div class='text-justify' >" + params.data.author + " </div>";
                //         }
                //         else {
                //             return "";
                //         }
                //    }
                //},

                 {
                    field: "published",
                    headerName: '@Resource["Published"]',
                    minWidth: 200,
                    maxWidth: 300,
                        cellRenderer: params => {
                            return "<div class='text-justify' >" + params.data.published+" </div>";
                        }
                    },


            ];

function onRssFeedView(url) {
                window.open(
                    url, "_blank");
            }



function getNewsfeedData() {
                document.getElementById("kgrdNewsFeed").innerHTML = "";
                var dist = $("#ddl").val();                
                var keyword = $("#serach_text").val();     
                var _fromdate = $("#fromDate").val();
                var _todate = $("#toDate").val();
                gridConfig(
                    "kgrdNewsFeed",
            "/Cms/BusinessAnalytics/ReadNewsFeedDataByFilters?district=" + dist + "&keyword=" + keyword + "&from=" + _fromdate + "&to=" + _todate,
                    columnDefs2,
                    false,
                    true,
                    true,
                    true,
                    1,
                    true,
                    10);

    }
var columnDefs3 = [

                {
                field: "View",
                headerName: "View",
                minWidth: 100,
                maxWidth: 100,
                cellRenderer: params => {
                    return "<span class='k-icon k-i-youtube-box k-color-danger k-icon-md' onclick='onYoutubeView(\"" + params.data.Id + "\")'>";
                },

    },
    {
        field: "Comment",
        headerName: "Comment",
        minWidth: 150,
        maxWidth: 300,
        cellRenderer: params => {
            return "<span class='fal fa-comment-o' style='font-size: 20px;' onclick='onCommentView(\"" + params.data.Id + "\")'></span>";
        }
    },
            {
                field: "channelTitle",
                headerName: 'Channel Title',
                minWidth:150,
                maxWidth: 300,
                cellRenderer: params => {
                    return "<div class='text-justify' >" + params.data.channelTitle+" </div>";
                }
            },
            {
                field: "title",
                headerName: '@Resource["Title"]',
                minWidth:400,
                maxWidth: 450,
                wrapText: true,
                autoHeight: true,
                cellRenderer: params => {                    
                     return "<p /*style='white-space: pre-wrap;'*/>" + params.data.title + " </p>";
                }

            },
            {
                field: "description",
                    headerName: '@Resource["Description"]',
                    minWidth:400,
                    maxWidth: 450,
                    wrapText: true,
                    autoHeight: true,
                cellRenderer: params => {                    
                     return "<p /*style='white-space: pre-wrap;'*/>" + params.data.description + " </p>";
                }
            },



            {
                field: "publishTime",
                    headerName: '@Resource["Published"]',
                    minWidth:200,
        maxWidth: 300,
                cellRenderer: params => {
                    return "<div class='text-justify' >" + params.data.publishTime+" </div>";
                }
            },


];
function onYoutubeView(id) {
    var url = "https://www.youtube.com/watch?v=" + id;
    window.open(
        url, "_blank");
}
function onCommentView(id) {
        var url = '/Cms/BusinessAnalytics/YoutubeComment?videoId='+ id;
        var win = GetMainWindow();
        win.iframeOpenUrl = url;
        win.OpenWindow({ Title: 'Youtube Comment', Width: 1000, Height: 600 });
        return false;
            }



function getYoutubeData() {
                document.getElementById("kgrdYoutube").innerHTML = "";               
                var dist = $("#ddl").val();                
                var keyword = $("#serach_text").val();     
                var _fromdate = $("#fromDate").val();
                var _todate = $("#toDate").val();
                gridConfig(
                    "kgrdYoutube",
            "/Cms/BusinessAnalytics/ReadYoutubeDataByFilters?district=" + dist + "&keyword=" + keyword + "&from=" + _fromdate + "&to=" + _todate,
                    columnDefs3,
                    false,
                    true,
                    true,
                    true,
                    1,
                    true,
                    10);

    }
var columnDefs4 = [

                  {
                    field: "View",
                    headerName: "View",
                    minWidth: 100,
                    maxWidth: 100,
                    cellRenderer: params => {
                        return "<span class='k-icon k-i-twitter-box k-color-primary k-icon-md' onclick='onTweetView(\"" + params.data.id + "\")'>";
                    },

        },
        {
            field: "text",
            headerName: 'Tweet',
            minWidth:500,
            maxWidth: 600,
            wrapText: true,
            autoHeight: true,
            cellRenderer: params => {                
                return "<p /*style='white-space: pre-wrap;'*/>" + params.data.text + " </p>";
            }
        },
        {
            field: "created_at",
            headerName: 'Created At',
            minWidth: 150,
            maxWidth: 300,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.created_at + " </div>";
            }
        },
        {
            field: "source",
            headerName: 'Source',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.source + " </div>";
            }
        },
        {
            field: "type",
            headerName: 'Type',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                if (params.data.type !=null) {
                    return "<div class='text-justify' >" + params.data.type + " </div>";
                }
                else {
                    return "";
                }

            }
        },
        {
            field: "possibly_sensitive",
            headerName: 'Possibly Sensitive',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.possibly_sensitive+" </div>";
            }
        },
        {
            field: "retweet_count",
            headerName: 'Retweet Count',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.retweet_count + " </div>";
            }
        },
        {
            field: "reply_count",
            headerName: 'Reply Count',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.reply_count + " </div>";
            }
        },
        {
            field: "like_count",
            headerName: 'Like Count',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.like_count + " </div>";
            }
        },
        {
            field: "quote_count",
            headerName: 'Quote Count',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.quote_count + " </div>";
            }
        }


    ];
function onTweetView(id) {
        var url = "https://twitter.com/web/status/" + id;
        window.open(
            url, "_blank");
    }
function getTwitterData() {
        document.getElementById("kgrdTwitter").innerHTML = "";
                var dist = $("#ddl").val();                
                var keyword = $("#serach_text").val();     
                var _fromdate = $("#fromDate").val();
                var _todate = $("#toDate").val();
                gridConfig(
                    "kgrdTwitter",
                    "/Cms/BusinessAnalytics/ReadTwitterDataByFilters?district=" + dist + "&keyword=" + keyword + "&from=" + _fromdate + "&to=" + _todate,
                    columnDefs4,
                    false,
                    true,
                    true,
                    true,
                    1,
                    true,
                    10);

    }


var columnDefsFacebook = [

        {
            field: "View",
            headerName: "View",
            minWidth: 100,
            maxWidth: 100,
            cellRenderer: params => {
                return "<span class='k-icon k-i-facebook-box k-color-primary k-icon-md' onclick='onFacebookView(\"" + params.data.post_url + "\")'>";
            },

        },
        {
            field: "post_msg",
            headerName: 'Post Text',
             minWidth:500,
            maxWidth: 600,
            wrapText: true,
            autoHeight: true,
            cellRenderer: params => {               
                return "<p /*style='white-space: pre-wrap;'*/>" + params.data.post_msg + " </p>";
            }
        },
        {
            field: "page_name",
            headerName: 'Page Name',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.page_name + " </div>";
            }
        },
        {
            field: "uploaded_by",
            headerName: 'Uploaded By',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                if (params.data.username != null) {
                    return "<div class='text-justify' >" + params.data.uploaded_by + " </div>";
                }
                else {
                    return "";
                }

            }
        },
        {
            field: "no_of_likes",
            headerName: 'Likes',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.no_of_likes + " </div>";
            }
        },
        {
            field: "no_of_comments",
            headerName: 'Comments',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.no_of_comments + " </div>";
            }
        },
        {
            field: "no_of_shares",
            headerName: 'Shares',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.no_of_shares + " </div>";
            }
        },
        {
            field: "post_date",
            headerName: 'Post Date',
             minWidth:150,
            maxWidth: 300,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.post_date + " </div>";
            }
        }


    ];
function onFacebookView(url) {
        window.open(
            url, "_blank");
    }
function getFacebookData() {
        document.getElementById("kgrdFacebook").innerHTML = "";
                var dist = $("#ddl").val();                
                var keyword = $("#serach_text").val();     
                var _fromdate = $("#fromDate").val();
                var _todate = $("#toDate").val();
                gridConfig(
                    "kgrdFacebook",
            "/Cms/BusinessAnalytics/ReadFacebookDataByFilters?district=" + dist + "&keyword=" + keyword + "&from=" + _fromdate + "&to=" + _todate,
                    columnDefsFacebook,
                    false,
                    true,
                    true,
                    true,
                    1,
                    true,
                    10);

    }
var columnDefsInstagram = [

        {
            field: "View",
            headerName: "View",
            minWidth:100,
            maxWidth: 100,
            cellRenderer: params => {
                return "<span class='k-icon fab fa-instagram k-color-danger k-icon-md' onclick='onInstaView(\"" + params.data.url + "\")'>";
            },

        },
        {
            field: "url",
            headerName: 'Url',
            minWidth: 800,
            maxWidth: 1200,
            cellRenderer: params => {
                return "<div class='text-justify' >" + params.data.url + " </div>";
            }
        }
        //,
        //{
        //    field: "created_date",
        //    headerName: 'Created Date',
        //    cellRenderer: params => {
        //        return "<div class='text-justify' >" + params.data.created_date + " </div>";
        //    }
        //}


    ];
function onInstaView(url) {
        window.open(
            url, "_blank");
    }
function getInstagramData() {
        document.getElementById("kgrdInstagram").innerHTML = "";
                var dist = $("#ddl").val();                
                var keyword = $("#serach_text").val();     
                var _fromdate = $("#fromDate").val();
                var _todate = $("#toDate").val();
                gridConfig(
                    "kgrdInstagram",
            "/Cms/BusinessAnalytics/ReadInstagramDataByFilters?district=" + dist + "&keyword=" + keyword + "&from=" + _fromdate + "&to=" + _todate,
                    columnDefsInstagram,
                    false,
                    true,
                    true,
                    true,
                    1,
                    true,
                    10);

    }

    function twitterSentiment(){
        $.ajax({
            type: "GET",
            url: "/Cms/BusinessAnalytics/GetChartDataByItemNameWithParams?itemName=TwitterSentimentNegative",
            success: function (response) {
                if (response != "" && response != null) {
                    eval(response);
                }
            },
            error: function (response) {
                alert("error");
            },
        });
    }
    function facebookSentiment(){
        $.ajax({
            type: "GET",
            url: "/Cms/BusinessAnalytics/GetChartDataByItemNameWithParams?itemName=TwitterNegativeSentimentTable",
            success: function (response) {
                if (response != "" && response != null) {
                    eval(response);
                }
            },
            error: function (response) {
                alert("error");
            },
        });
    }
    function twitterSentimentData() {
        $.ajax({
            type: "GET",
            url: "/Cms/BusinessAnalytics/GetChartDataByItemNameWithParams?itemName=FacebookNegativeSentimentTable",
            success: function (response) {
                if (response != "" && response != null) {
                    eval(response);
                }
            },
            error: function (response) {
                alert("error");
            },
        });
    }
    function facebookSentimentData() {
        $.ajax({
            type: "GET",
            url: "/Cms/BusinessAnalytics/GetChartDataByItemNameWithParams?itemName=FacebookSentimentNegative",
            success: function (response) {
                if (response != "" && response != null) {
                    eval(response);
                }
            },
            error: function (response) {
                alert("error");
            },
        });
    }
     function loadWordCloud() {
        $.ajax({
            type: "GET",
            url: "/Cms/BusinessAnalytics/GetWordCloudImageBase64",
            success: function (response) {
                if (response != "" && response != null) {
                    var image="data:image/jpeg;base64, " +response;
                    $("#base64image").attr("src", image);
                }
            },
            error: function (response) {
                alert("error");
            },
        });
    }
</script>





