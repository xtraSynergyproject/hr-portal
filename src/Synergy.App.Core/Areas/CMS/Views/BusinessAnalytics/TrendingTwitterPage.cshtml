@using Synergy.App.ViewModel;
@using Synergy.App.Common;
@inject Synergy.App.Common.IUserContext _userContext

@{
    ViewData["Title"] = "Trending Twitter Posts";
    Layout = null;
    //Layout = "~/Areas/Core/Views/Shared/Themes/HR/_Layout.cshtml";
}
<style>
body {
        font-family: 'Inter', sans-serif;
    }

    .ag-header-cell-text {
        color: black;
        font-weight: 200;
        font-size: medium;
    }

    .ag-row:hover {
        background-color: #fbfcfd;
    }

    .ag-header-cell {
        /*background-color: #DCDCDC;*/
        background-color: #fff;
        color: black;
    }



    .ag-root-wrapper-body.ag-layout-normal {
        min-height: 555px !important;
    }

    .ag-header-cell-label {
        justify-content: center;
    }
    
</style>

<script>
    $(function () {
        getAllTrendingTwitterPosts();
    });

    var TcolumnDefs = [
        {
            field: "url",
            headerName: 'Link',
            maxWidth: 150,
            cellRenderer: params => {
                debugger;
                return "<span style='display:flex; align-items:center; justify-content:center;'><a href=\"" + params.data.url + "\" target='_blank'>Visit Post</a></span>";
            }

        },
        {
            field: "name",
            headerName: 'Name',
            cellRenderer: params => {
                debugger;
                return "<span style='display:flex; align-items:center; justify-content:center;'>" + params.value + "</span>";
            }
        },
        {
            headerName: "Tweets",
            field: "tweet_volume",
            cellRenderer: params => {
                debugger;
                return "<span style='display:flex; align-items:center; justify-content:center;'>" + params.value + "</span>";
            }
        },
        {
            headerName: "Location",
            field: "location",
            cellRenderer: params => {
                debugger;
                return "<span style='display:flex; align-items:center; justify-content:center;'>" + params.value + "</span>";
            }
        },
        {
            field: "created_date",
            headerName: 'Date',
            cellRenderer: params => {
                debugger;
                var date = new Date(params.value);
                return "<span style='display:flex; align-items:center; justify-content:center;'>" + date.getDate() + "." + (date.getMonth() + 1) + "." + date.getFullYear() + "  " + date.toLocaleTimeString() + "</span>";
            }
        }
    ];

    function getAllTrendingTwitterPosts() {
        document.getElementById("TwitterGrid").innerHTML = "";
        gridConfig(
            "TwitterGrid",
            "/Cms/BusinessAnalytics/GetTwitterData?locationName=@ViewBag.LocationName",
            TcolumnDefs,
            false,
            true,
            true,
            true,
            1,
            true,
            10);
    }
    function onBackButton() {
        window.location.reload();
    }
</script>

<div class="card shadow" style="margin: 30px;">
    <div class="card-body"style="padding-bottom: 0">
        <div class="row" style="margin-bottom: 5px;">
            <div class="col-10" style="justify-content: center">
                <h4>Trending Twitter Posts</h4>
            </div>
             <div class="col-2">
                <button type='button' class='btn btn-outline-primary shadow-sm' onclick='onBackButton()' style="float: right; width: 150px;">
                    <span class="button-body">
                        <i class="fas fa-long-arrow-alt-left"></i>
                        <span class="button-text">Back</span>
                    </span>
                </button>                
            </div>
        </div>

        <hr />

        <div class="row no-gutters">
            <div class="col-12">
                <div id="TwitterGrid" style="width: 100%; height: 100%;" class="ag-theme-material"></div>
            </div>
        </div>
        
    </div>
</div>
