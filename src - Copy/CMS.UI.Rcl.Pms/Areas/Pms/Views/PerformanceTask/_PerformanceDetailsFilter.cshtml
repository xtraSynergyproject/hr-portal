@inject IStringLocalizer<CMS.UI.Web.Areas.Pms.Controllers.PerformanceTaskController> Resource
@using CMS.UI.ViewModel;
@using Kendo.Mvc.UI;
@using CMS.Common;


@{
    ViewBag.Title = "";
    // Layout = "/Views/Shared/_PopupLayout.cshtml";
    // Layout = "~/Areas/CMS/Views/Shared/_LayoutCMS.cshtml";
    Layout = null;
}
<style>
    .dropdown-toggle::after {
        display: none;
    }

    .dropdown-menu {
        width: 100%;
        position: absolute;
        top: 100%;
        left: 0;
        z-index: 1000;
        display: none;
        float: left;
        min-width: 160px;
        padding: 5px 0;
        margin: 2px 0 0;
        font-size: 14px;
        list-style: none;
        background-color: #fff;
        border: 1px solid #ccc;
        border: 1px solid rgba(0,0,0,.15);
        border-radius: 4px;
        -webkit-box-shadow: 0 6px 12px rgb(0 0 0 / 18%);
        box-shadow: 0 6px 12px rgb(0 0 0 / 18%);
        background-clip: padding-box;
    }

    .project-dropdown ul {
        list-style-type: none;
        margin-bottom: 0px;
    }
    /* #dropdown {
        height: 42px;
        left: 221px;
        bottom: 35px;
        font-size: 18px;

        width: 99%;
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid #E8E5E5;
        box-sizing: border-box;
        border-radius: 3px;
        color: #FFFFFF;
    }*/
    #banner {
        width: 100%;
       /* height: 140px;*/
        /* height: 160px;*/
        left: 389px;
        top: 157px;
        background: #2D9FCA;
        border: 1px solid #FFFFFF;
        box-shadow: 0px 2px 2px rgb(0 0 0 / 25%);
        border-radius: 6px;
        font-family: roboto;
    }

    .banner-item-project {
        background-color: #d6aa24;
    }

    .banner-item {
        color: #fff;
        height: 60px;
        text-align: left;
    }

        .banner-item:hover {
            color: #fff;
        }

    .banner-item-project {
        background-color: #42ca88;
    }

    .banner-item-date {
        background-color: #f0ad4e;
    }

    .k-dropdown-project .k-input {
        display: none !important;
    }

    .hr-x-large {
        max-width: none !important;
    }

    .hr-xx-large {
        max-width: none !important;
    }

    .date {
        width: 100%;
    }
</style>
<script>

    $(document).ready(function () {
        HideLoader($("#global-overlay"));
        $("#FromDate").kendoDatePicker();
        $("#ToDate").kendoDatePicker();

         $("#DateType").kendoDropDownList({
            dataTextField: "Name",
            dataValueField: "Id",
            optionLabel: "@SharedResource["Select"]",
            change: OnDateTypeChange,
            dataSource: {
                transport: {
                    read: {
                        url: "/Home/GetEnumIdNameList?enumType=DateTypeEnum",
                    }
                }
            }
        });

        $("#Column").kendoDropDownList({
            dataTextField: "Name",
            dataValueField: "Id",
            optionLabel: "@SharedResource["Select"]",
            dataSource: {
                transport: {
                    read: {
                        url: "/Home/GetEnumIdNameList?enumType=FilterColumnEnum",
                    }
                }
            }
        });
    });
    @*function OnServiceChange(e) {
        var dataItem = e.sender.dataItem();
        //debugger
        LoadPartailView1("/pjm/ProjectTask/ProjectDetailsBanner?pageName=@Model.PageName&ProjectId=" + dataItem.Id, 'ProjectBanner');
        if ("@Model.PageName" == "ProjectTaskByUser")
        {
            window.parent.LoadPartailView1("/pjm/ProjectTask/ProjectTaskByName?ProjectId=" + dataItem.Id, 'Project-content');
        }
         if ("@Model.PageName" == "ProjectTaskByDate")
        {
             window.parent.LoadPartailView1("/pjm/ProjectTask/ProjectTaskByDate?ProjectId=" + dataItem.Id, 'Project-content');
        }
       if ("@Model.PageName" == "PerformanceByStatus")
        {
           window.parent.LoadPartailView1("/pms/PerformanceTask/PerformanceTaskView?ProjectId=" + dataItem.Id, 'Project-content');
        }
        if ("@Model.PageName" == "ProjectDashboard")
        {
             window.parent.LoadPartailView1("/pjm/Project/ProjectDashboard?projectId=" + dataItem.Id, 'Project-content');
        }
    }*@
    //function onSearch() {

    //    var project = $("#Project").data("kendoMultiSelect").value();
    //    var reciever = $("#Reciever").data("kendoMultiSelect").value();
    //    var sender = $("#Sender").data("kendoMultiSelect").value();
    //    var status = $("#Status").data("kendoMultiSelect").value();
    //    var sd = kendo.toString($("#FromDate").data("kendoDatePicker").value(), 'yyyy/MM/dd');
    //    var ed = kendo.toString($("#ToDate").data("kendoDatePicker").value(), 'yyyy/MM/dd');

    //}
    //function onReset() {
    //    window.parent.LoadPartailView1("/pjm/ProjectTask/ProjectDetailsFilter", 'ProjectFilter');
    //}
    function onAdvanceSerach() {
        $("#AdvanceFilter").show();
        $("#hideAdvanceFilterbtn").show();
        $("#AdvanceFilterbtn").hide();
    }
    function onHideAdvanceSerach() {
        $("#Column").data("kendoDropDownList").value("");
        $("#DateType").data("kendoDropDownList").value("");
        $("#FromDate").data("kendoDatePicker").value("");
        $("#ToDate").data("kendoDatePicker").value("");
        $("#AdvanceFilter").hide();
        $("#AdvanceFilterbtn").show();
        $("#hideAdvanceFilterbtn").hide();
    }
    function OnDateTypeChange(e) {

       // var item = e.item.text();
        var item = $("#DateType").data("kendoDropDownList").value();
        if (item == "Between") {
            $(".daterange").show();
        }
        else{
            $(".daterange").hide();
        }
    }

    function onChangeTaskStagesType() {
        //var multiselectTaskStatus = $("#mdlTaskStatus").data("kendoMultiSelect");
        //var statusvalue = multiselectTaskStatus.value();
        //var multiselectTaskAssigned = $("#mdlTaskAssigned").data("kendoMultiSelect");
        //var assignedvalue = multiselectTaskAssigned.value();
        //var multiselectTaskStages = $("#mdlTaskStages").data("kendoMultiSelect");
        //var stagevalue = multiselectTaskStages.value();
        var multiselectTaskStagesType = $("#mdlTaskStagesType").data("kendoMultiSelect");
            var stagetypevalue = multiselectTaskStagesType.value();
            //alert(stagetypevalue);
        var search = {
            types: stagetypevalue,
        };
        $("#mdlTaskStages").data("kendoMultiSelect").dataSource.read(search);

    }
    function onChangeTaskStages() {
        @*var multiselectTaskStatus = $("#mdlTaskStatus").data("kendoMultiSelect");
        var statusvalue = multiselectTaskStatus.value();
        var multiselectTaskAssigned = $("#mdlTaskAssigned").data("kendoMultiSelect");
        var assignedvalue = multiselectTaskAssigned.value();
        var multiselectTaskStages = $("#mdlTaskStages").data("kendoMultiSelect");
        var stagevalue = multiselectTaskStages.value();
        var multiselectTaskStagesType = $("#mdlTaskStagesType").data("kendoMultiSelect");
        var stagetypevalue = multiselectTaskStagesType.value();
        var search = {
            performanceId: '@Model.Id',
            performanceIds: stagevalue,
            statusIds: statusvalue,
            recieverids: assignedvalue,
            type: stagetypevalue
        };
        $("#kgdProjectGridView").data("kendoGrid").dataSource.read(search);*@

    }
</script>
<div class="panel panel-default">
    <div class="panel-heading" data-toggle="collapse" href="#search" style="background-color: #2D9FCA;color:#FFFFFF">
       @SharedResource["Filter"]   <span id="filtertext"></span>
    </div>
    <div class="panel-collapse collapse" id="search">
        <div id="filter" role="group" style="width:100%;color:#FFFFFF;background: #17a2b8;padding: 5px;">
            <div class="row" style="padding-top:10px;">
                @if (!ViewBag.HideProject)
                {
                    <div class="col-sm-3 col-md-3">
                        @Resource["PerformanceDocument"]
                        <br />
                        @*@(Html.Kendo().MultiSelect().Name("ProjectFiltersIds")
                                 .DataSource(source =>
                                 {
                                     source.Read(read =>
                                     {
                                         read.Action("GetPerformanceList", "PerformanceTask", new { @area = "Pms" });
                                     });
                                 })
                                 .AutoClose(false)
                                // .Placeholder("Search Performance Document")
                                 .DataTextField("Name")
                                 .DataValueField("Id")
                                 .HtmlAttributes(new { @class = "hr-x-large search-control" })
                )*@
                        <select id="ProjectFiltersIds" class="hr-x-large search-control"></select>
                        <script>
        $(document).ready(function () {
            $("#ProjectFiltersIds").kendoMultiSelect({
            dataTextField: "Name",
            dataValueField: "Id",
            filter: "contains",
            autoBind: true,
            autoClose: false,
            dataSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "@Url.Action("GetPerformanceList", "PerformanceTask", new { @area = "Pms" })",
                    }
                },
            }),
        });
        });
                        </script>
                    </div>
                }
                <div class="col-3">
                    @Resource["Objectives"]
                    @*@(Html.Kendo().MultiSelect().Name("mdlTaskStages")
                             .DataSource(source =>
                             {
                                 source.Read(read =>
                                 {
                                     read.Action("GetPerformanceStageIdNameList", "Performance", new {area = "Pms" });
                                     //read.Action("GetEnumIdNameList", "Home", new { area = "", enumType = "PerformanceStageEnum" });
                                 });
                             })
                             .AutoClose(false)
                             //.Placeholder("Search Objectives")
                             .DataTextField("Name")
                             .DataValueField("Id")
                             .Events(e => e.Change("onChangeTaskStages"))
                             .HtmlAttributes(new { @class = "hr-x-large search-control" })
            )*@
                    <select id="mdlTaskStages" class="hr-x-large search-control"></select>
                    <script>
        $(document).ready(function () {
            $("#mdlTaskStages").kendoMultiSelect({
            dataTextField: "Name",
            dataValueField: "Id",
            filter: "contains",
            autoBind: true,
            autoClose: false,
                change: onChangeTaskStages,
            dataSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "@Url.Action("GetPerformanceStageIdNameList", "Performance", new { area = "Pms" })",
                    }
                },
            }),
        });
        });
                    </script>
                </div>
                <div class="col-3">
                    @Resource["Type"]
                    @*@(Html.Kendo().MultiSelect().Name("mdlTaskStagesType")
                             .DataSource(source =>
                             {
                                 source.Read(read =>
                                 {
                                     //read.Action("GetPerformanceStageIdNameList", "Performance", new {area = "Pms", performanceId = Model.Id });
                                     read.Action("GetEnumIdNameList", "Home", new { area = "", enumType = "PerformanceStageEnum" });
                                 });
                             })
                             .AutoClose(false)
                             //.Placeholder("Search Type")
                             .DataTextField("Name")
                             .DataValueField("Id")
                             .Events(e => e.Change("onChangeTaskStagesType"))
                             .HtmlAttributes(new { @class = "hr-x-large search-control" })
            )*@
                    <select id="mdlTaskStagesType" class="hr-x-large search-control"></select>
                    <script>
        $(document).ready(function () {
            $("#mdlTaskStagesType").kendoMultiSelect({
            dataTextField: "Name",
            dataValueField: "Id",
            filter: "contains",
            autoBind: true,
            autoClose: false,
            change: onChangeTaskStagesType,
            dataSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "@Url.Action("GetEnumIdNameList", "Home", new { area = "", enumType = "PerformanceStageEnum" })",
                    }
                },
            }),
        });
        });
                    </script>
                </div>
                @if (!ViewBag.HideReceiver)
                {
                    if (ViewBag.IsLineManage)
                    {
                        <div class="col-sm-3 col-md-3">

                            @Resource["Assignee/Receiver"]<br />
                            @*@(Html.Kendo().MultiSelect().Name("Receiver")
                                     .DataSource(source =>
                                     {
                                         source.Read(read =>
                                         {
                                             read.Action("GetSubordinatesIdNameList", "PerformanceTask", new { area = "Pms" });
                                         });
                                     })
                                     .AutoClose(false)
                                     //.Placeholder("Search User")
                                     .DataTextField("Name")
                                     .DataValueField("Id")
                                     .HtmlAttributes(new { @class = "hr-x-large search-control" })
                    )*@
                            <select id="Receiver" class="hr-x-large search-control"></select>
                            <script>
        $(document).ready(function () {
            $("#Receiver").kendoMultiSelect({
            dataTextField: "Name",
            dataValueField: "Id",
            filter: "contains",
            autoBind: true,
            autoClose: false,
            dataSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "@Url.Action("GetSubordinatesIdNameList", "PerformanceTask", new { area = "Pms" })",
                    }
                },
            }),
        });
        });
                            </script>
                        </div>
                    }
                    else
                    {
                        <div class="col-sm-3 col-md-3">

                            @Resource["Assignee/Receiver"]<br />
                            @*@(Html.Kendo().MultiSelect().Name("Receiver")
                                     .DataSource(source =>
                                     {
                                         source.Read(read =>
                                         {
                                             read.Action("GetUsersIdNameList", "User", new { area = "CMS" });
                                         });
                                     })
                                     .AutoClose(false)
                                     //.Placeholder("Search User")
                                     .DataTextField("Name")
                                     .DataValueField("Id")
                                     .HtmlAttributes(new { @class = "hr-x-large search-control" })
                    )*@
                            <select id="Receiver" class="hr-x-large search-control"></select>
                            <script>
        $(document).ready(function () {
            $("#Receiver").kendoMultiSelect({
            dataTextField: "Name",
            dataValueField: "Id",
            filter: "contains",
            autoBind: true,
            autoClose: false,
            dataSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "@Url.Action("GetUsersIdNameList", "User", new { area = "CMS" })",
                    }
                },
            }),
        });
        });
                            </script>
                        </div>
                    }

                }
                @if (ViewBag.IsLineManage)
                {
                    <div class="col-sm-3 col-md-3">

                        @Resource["RequestedBy"]<br />
                        @*@(Html.Kendo().MultiSelect().Name("Sender")
                                 .DataSource(source =>
                                 {
                                     source.Read(read =>
                                     {
                                         read.Action("GetSubordinatesIdNameList", "PerformanceTask", new { area = "Pms" });
                                     });
                                 })
                                 .AutoClose(false)
                                 //.Placeholder("Search User")
                                 .DataTextField("Name")
                                 .DataValueField("Id")
                                 .HtmlAttributes(new { @class = "hr-x-large search-control" })
                )*@
                        <select id="Sender" class="hr-x-large search-control"></select>
                        <script>
        $(document).ready(function () {
            $("#Sender").kendoMultiSelect({
            dataTextField: "Name",
            dataValueField: "Id",
            filter: "contains",
            autoBind: true,
            autoClose: false,
            dataSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "@Url.Action("GetSubordinatesIdNameList", "PerformanceTask", new { area = "Pms" })",
                    }
                },
            }),
        });
        });
                        </script>
                    </div>
                    <div class="col-sm-3 col-md-3">

                        @Resource["Employee"]<br />
                        @*@(Html.Kendo().MultiSelect().Name("Sender")
                                 .DataSource(source =>
                                 {
                                     source.Read(read =>
                                     {
                                         read.Action("GetSubordinatesIdNameList", "PerformanceTask", new { area = "Pms" });
                                     });
                                 })
                                 .AutoClose(false)
                                 //.Placeholder("Search User")
                                 .DataTextField("Name")
                                 .DataValueField("Id")
                                 .HtmlAttributes(new { @class = "hr-x-large search-control" })
                )*@
                        <select id="Receiver" class="hr-x-large search-control"></select>
                        <script>
        $(document).ready(function () {
            $("#Receiver").kendoMultiSelect({
            dataTextField: "Name",
            dataValueField: "Id",
            filter: "contains",
            autoBind: true,
            autoClose: false,
            dataSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "@Url.Action("GetSubordinatesIdNameList", "PerformanceTask", new { area = "Pms" })",
                    }
                },
            }),
        });
        });
                        </script>
                    </div>
                }
                else
                {
                    <div class="col-sm-3 col-md-3">

                        @Resource["Owner/Sender"]<br />
                        @*@(Html.Kendo().MultiSelect().Name("Sender")
                                 .DataSource(source =>
                                 {
                                     source.Read(read =>
                                     {
                                         read.Action("GetUsersIdNameList", "User", new { area = "CMS" });
                                     });
                                 })
                                 .AutoClose(false)
                                 //.Placeholder("Search User")
                                 .DataTextField("Name")
                                 .DataValueField("Id")
                                 .HtmlAttributes(new { @class = "hr-x-large search-control" })
                )*@
                        <select id="Sender" class="hr-x-large search-control"></select>
                        <script>
        $(document).ready(function () {
            $("#Sender").kendoMultiSelect({
            dataTextField: "Name",
            dataValueField: "Id",
            filter: "contains",
            autoBind: true,
            autoClose: false,
            dataSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "@Url.Action("GetUsersIdNameList", "User", new { area = "CMS" })",
                    }
                },
            }),
        });
        });
                        </script>

                    </div>
                }



                @if (ViewBag.IsService)
                {
                    <div class="col-sm-3 col-md-3">

                        @SharedResource["Status"]   <br />
                        @*@(Html.Kendo().MultiSelect().Name("Status")
                                 .DataSource(source =>
                                 {
                                     source.Read(read =>
                                     {
                                         read.Action("GetLOVIdNameList", "LOV", new { area = "CMS", lovType = "LOV_SERVICE_STATUS" });
                                     });
                                 })
                                 .AutoClose(false)
                                 //.Placeholder("Search Status")
                                 .DataTextField("Name")
                                 .DataValueField("Id")
                                 .HtmlAttributes(new { @class = "hr-x-large search-control" })
                )*@
                        <select id="Status" class="hr-x-large search-control"></select>
                        <script>
        $(document).ready(function () {
            $("#Status").kendoMultiSelect({
            dataTextField: "Name",
            dataValueField: "Id",
            filter: "contains",
            autoBind: true,
            autoClose: false,
            dataSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "@Url.Action("GetLOVIdNameList", "LOV", new { area = "CMS", lovType = "LOV_SERVICE_STATUS" })",
                    }
                },
            }),
        });
        });
                        </script>
                    </div>
                }
                else
                {
                    <div class="col-sm-3 col-md-3">

                        @SharedResource["Status"]   <br />
                        @*@(Html.Kendo().MultiSelect().Name("Status")
                                 .DataSource(source =>
                                 {
                                     source.Read(read =>
                                     {
                                         read.Action("GetLOVIdNameList", "LOV", new { area = "CMS", lovType = "LOV_TASK_STATUS" });
                                     });
                                 })
                                 .AutoClose(false)
                                 //.Placeholder("Search Status")
                                 .DataTextField("Name")
                                 .DataValueField("Id")
                                 .HtmlAttributes(new { @class = "hr-x-large search-control" })
                )*@
                        <select id="Status" class="hr-x-large search-control"></select>
                        <script>
        $(document).ready(function () {
            $("#Status").kendoMultiSelect({
            dataTextField: "Name",
            dataValueField: "Id",
            filter: "contains",
            autoBind: true,
            autoClose: false,
            dataSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "@Url.Action("GetLOVIdNameList", "LOV", new { area = "CMS", lovType = "LOV_TASK_STATUS" })",
                    }
                },
            }),
        });
        });
                        </script>
                    </div>
                }

            </div>
            <div class="row" style="padding-top: 10px;padding-bottom: 10px;display:none" id="AdvanceFilter">
                <div class="col-sm-3 col-md-3">
                    @Resource["ColumnToFilter"]<br />
                    @*@(Html.Kendo().DropDownList().Name("Column")
        .DataTextField("Name")
        .DataValueField("Id")
        //.Filter(FilterType.Contains)
        .OptionLabel(""+ SharedResource["Select"] + "")
        .DataSource(source =>
        {
            source.Read(read =>
            {
                read.Action("GetEnumIdNameList", "Home", new { @area = "", enumType = "FilterColumnEnum" });
            });
        })
        //.Events(x => x.Change("OnServiceChange"))
        .HtmlAttributes(new { @class = "hr-xx-large search-control" })
        )*@

                    <input id="Column" class="hr-xx-large search-control" />
                </div>
                <div class="col-sm-3 col-md-3">
                    @Resource["DateRange"]<br />
                    @*@(Html.Kendo().DropDownList().Name("DateType")
        .DataTextField("Name")
        .DataValueField("Id")
        //.Filter(FilterType.Contains)
        .OptionLabel("" + SharedResource["Select"] + "")
        .DataSource(source =>
        {
            source.Read(read =>
            {
                read.Action("GetEnumIdNameList", "Home", new { @area = "", enumType = "DateTypeEnum" });
            });
        })
        .Events(x => x.Select("OnDateTypeChange"))
        .HtmlAttributes(new { @class = "hr-xx-large search-control" })
        )*@

                    <input id="DateType" class="hr-xx-large search-control" />
                </div>

                <div class="col-sm-3 col-md-3 daterange" style="display:none">
                    @Resource["FromDate"]<br />
                    @*@(Html.Kendo().DatePicker()
             .Name("FromDate").HtmlAttributes(new {@class="date" })
        )*@
                    <input id="FromDate" class="date" />
                </div>
                <div class=" col-md-3 daterange" style="display:none">
                    @Resource["ToDate"] <br />
                    @*@(Html.Kendo().DatePicker()
             .Name("ToDate").HtmlAttributes(new { @class = "date" })
        )*@ 
                    <input id="ToDate" class="date" />
                </div>
                @*@if (ViewBag.ManagePerformance)
                    {
                        <div class=" col-md-3">
                            Goal/Competency <br />
                            @Html.Kendo().DropDownList().Name("Type").BindTo(new List<SelectListItem>() {
                          new SelectListItem() {
                              Text = "Goal",
                              Value = "Goal"
                          },
                          new SelectListItem() {
                              Text = "Competency",
                              Value = "Competency"
                          }
                      })
                        </div>
                    }*@
            </div>
            <div class="row">
                <div class=" col-md-12">
                    <br />
                    <button class="btn btn-warning" onclick="onSearch()">@SharedResource["Search"]</button>
                    <button class="btn btn-danger" onclick="onReset()">@SharedResource["Reset"]</button>
                    <button class="btn btn-success" onclick="onAdvanceSerach()" id="AdvanceFilterbtn">@Resource["ViewAdvanceFilter"]</button>
                    <button class="btn btn-danger" onclick="onHideAdvanceSerach()" style="display:none" id="hideAdvanceFilterbtn">@Resource["HideAdvanceFilter"]</button>
                </div>
            </div>
        </div>
    </div>
</div>
